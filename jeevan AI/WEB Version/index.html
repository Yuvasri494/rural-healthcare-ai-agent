<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rural Healthcare AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            position: relative;
            overflow: hidden;
            min-height: 600px;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #4CAF50, #2196F3, #FF9800);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 300;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 400;
        }

        .disclaimer {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
            background: #fff3cd;
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid #ff9800;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .language-selector {
            text-align: center;
            margin-bottom: 30px;
        }

        .lang-prompt {
            font-size: 18px;
            margin-bottom: 20px;
            color: #333;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            min-width: 150px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-btn {
            padding: 20px;
            font-size: 18px;
            border-radius: 15px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .input-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .input-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .text-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            min-width: 200px;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .voice-btn {
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            min-width: 120px;
        }

        .voice-status {
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-weight: 500;
        }

        .listening {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .processing {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .symptom-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

        .symptom-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .symptom-name {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }

        .confidence {
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .severity {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px 0;
        }

        .severity.H {
            background: #d4edda;
            color: #155724;
        }

        .severity.D {
            background: #fff3cd;
            color: #856404;
        }

        .severity.E {
            background: #f8d7da;
            color: #721c24;
        }

        .advice-section {
            margin: 15px 0;
            padding: 15px;
            background: #f1f3f4;
            border-radius: 10px;
        }

        .section-title {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptoms-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .symptom-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .back-btn {
            background: #6c757d !important;
            margin-bottom: 20px;
        }

        .usage-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .general-advice {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #4CAF50;
        }

        .advice-list {
            margin: 15px 0;
            padding-left: 20px;
        }

        .advice-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .input-controls {
                flex-direction: column;
            }
            
            .text-input {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Selection Screen -->
        <div id="language-screen" class="screen active">
            <div class="language-selector">
                <div class="lang-prompt">ЁЯМР Select language / рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ / роорпКро┤ро┐ропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                <button class="btn" onclick="selectLanguage('english')">1. English</button>
                <button class="btn" onclick="selectLanguage('hindi')">2. рд╣рд┐рдВрджреА</button>
                <button class="btn" onclick="selectLanguage('tamil')">3. родрооро┐ро┤рпН</button>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div id="main-screen" class="screen">
            <h1 id="main-title">ЁЯПе RURAL HEALTHCARE AI ASSISTANT ЁЯПе</h1>
            <div id="disclaimer" class="disclaimer">
                тЪая╕П DISCLAIMER: Basic guidance only. Consult doctors for serious cases.
            </div>
            
            <div class="main-menu">
                <button class="btn menu-btn" onclick="showSymptomDiagnosis()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">ЁЯй║</div>
                        <div id="menu-diagnosis">Symptom Diagnosis</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showLanguageSelector()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">ЁЯМР</div>
                        <div id="menu-language">Change Language</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showAllSymptoms()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">ЁЯУК</div>
                        <div id="menu-symptoms">View All Symptoms</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showUsageStats()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">ЁЯУИ</div>
                        <div id="menu-stats">Usage Statistics</div>
                    </div>
                </button>
              <div style="text-align: center; margin: 20px 0;">
    <button class="btn voice-btn" id="emergencyBtnMain" onclick="emergencyAlert()">ЁЯЪи Emergency</button>
</div>
  

            </div>
        </div>
        
        <!-- Symptom Diagnosis Screen -->
        <div id="diagnosis-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn">тЖР Back to Menu</button>
            <h2 id="diagnosis-title">ЁЯй║ Symptom Diagnosis</h2>
            
            <div class="input-section">
                <div id="input-prompt">ЁЯй║ Describe your symptom:</div>
                
                <div class="input-controls">
                    <input type="text" id="symptom-input" class="text-input" placeholder="Type your symptom here...">
                    <div class="voice-controls">
                        <button class="btn voice-btn" id="voice-btn" onclick="startVoiceInput()">ЁЯОд Voice</button>
                        <button class="btn voice-btn" onclick="processSymptom()">ЁЯФН Analyze</button>
                    </div>
                </div>
                
                <div id="voice-status" class="voice-status" style="display: none;"></div>
            </div>
            
            <div id="results" class="results" style="display: none;"></div>
            <div class="voice-controls">
    <button class="btn" id="emergencyBtn" onclick="emergencyAlert()">ЁЯЪи Emergency</button>
</div>


        </div>

        <!-- All Symptoms Screen -->
        <div id="symptoms-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn2">тЖР Back to Menu</button>
            <h2 id="symptoms-title">ЁЯУК All Symptoms Database</h2>
            <div id="symptoms-list" class="symptoms-list">
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Loading symptoms...</div>
                </div>
            </div>
        </div>

        <!-- Usage Statistics Screen -->
        <div id="stats-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn3">тЖР Back to Menu</button>
            <h2 id="stats-title">ЁЯУИ Usage Statistics</h2>
            <div id="usage-stats" class="usage-stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-queries">0</div>
                    <div class="stat-label" id="queries-label">Total Queries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="voice-queries">0</div>
                    <div class="stat-label" id="voice-label">Voice Queries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="successful-matches">0</div>
                    <div class="stat-label" id="matches-label">Successful Matches</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let currentLanguage = 'english';
        let isListening = false;
        let recognition = null;
        let usageStats = {
            totalQueries: 0,
            voiceQueries: 0,
            successfulMatches: 0
        };

        // Save stats to memory (since localStorage not supported)
        function saveStats() {
            // Stats will persist only during this session
        }

        // Translations
        const translations = {
            'welcome_title': {
                'english': "ЁЯПе RURAL HEALTHCARE AI ASSISTANT ЁЯПе",
                'hindi': "ЁЯПе рдЧреНрд░рд╛рдореАрдг рд╕реНрд╡рд╛рд╕реНрдереНрдп рдПрдЖрдИ рд╕рд╣рд╛рдпрдХ ЁЯПе",
                'tamil': "ЁЯПе роХро┐ро░ро╛роорокрпНрокрпБро▒ роЪрпБроХро╛родро╛ро░ AI роЙродро╡ро┐ропро╛ро│ро░рпН ЁЯПе"
            },
            'disclaimer': {
                'english': "тЪая╕П DISCLAIMER: Basic guidance only. Consult doctors for serious cases.",
                'hindi': "тЪая╕П рдЕрд╕реНрд╡реАрдХрд░рдг: рдХреЗрд╡рд▓ рдмреБрдирд┐рдпрд╛рджреА рдорд╛рд░реНрдЧрджрд░реНрд╢рдиред рдЧрдВрднреАрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдбреЙрдХреНрдЯрд░ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред",
                'tamil': "тЪая╕П роорпБро▒рпИроЪрпНроЪро╛роЯрпНроЯрпБ: роЕроЯро┐рокрпНрокроЯрпИ ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпНродро╛ройрпН. роирпБрогрпБрдХрпНроХрооро╛рой ро╡ро┤роХрпНроХрпБроХро│ро┐ро▓рпН рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН."
            },
            'menu_diagnosis': {
                'english': "Symptom Diagnosis",
                'hindi': "рд▓рдХреНрд╖рдг рдирд┐рджрд╛рди",
                'tamil': "роЕро▒ро┐роХрпБро▒ро┐ рокро░ро┐роЪрпЛродройрпИ"
            },
            'menu_language': {
                'english': "Change Language",
                'hindi': "рднрд╛рд╖рд╛ рдмрджрд▓реЗрдВ",
                'tamil': "роорпКро┤ро┐ропрпИ рооро╛ро▒рпНро▒ро╡рпБроорпН"
            },
            'menu_symptoms': {
                'english': "View All Symptoms",
                'hindi': "рд╕рднреА рд▓рдХреНрд╖рдг рджреЗрдЦреЗрдВ",
                'tamil': "роЕройрпИродрпНродрпБ роЕро▒ро┐роХрпБро▒ро┐роХро│рпИропрпБроорпН роХро╛рогрпНроХ"
            },
            'menu_stats': {
                'english': "Usage Statistics",
                'hindi': "рдЙрдкрдпреЛрдЧ рдЖрдВрдХрдбрд╝реЗ",
                'tamil': "рокропройрпНрокро╛роЯрпНроЯрпБ рокрпБро│рпНро│ро┐ро╡ро┐ро╡ро░роЩрпНроХро│рпН"
            },
            'diagnosis_title': {
                'english': "ЁЯй║ Symptom Diagnosis",
                'hindi': "ЁЯй║ рд▓рдХреНрд╖рдг рдирд┐рджрд╛рди",
                'tamil': "ЁЯй║ роЕро▒ро┐роХрпБро▒ро┐ рокро░ро┐роЪрпЛродройрпИ"
            },
            'symptoms_title': {
                'english': "ЁЯУК All Symptoms Database",
                'hindi': "ЁЯУК рд╕рднреА рд▓рдХреНрд╖рдг рдбреЗрдЯрд╛рдмреЗрд╕",
                'tamil': "ЁЯУК роЕройрпИродрпНродрпБ роЕро▒ро┐роХрпБро▒ро┐роХро│ро┐ройрпН родро░ро╡рпБродрпНродро│роорпН"
            },
            'stats_title': {
                'english': "ЁЯУИ Usage Statistics",
                'hindi': "ЁЯУИ рдЙрдкрдпреЛрдЧ рдЖрдВрдХрдбрд╝реЗ",
                'tamil': "ЁЯУИ рокропройрпНрокро╛роЯрпНроЯрпБ рокрпБро│рпНро│ро┐ро╡ро┐ро╡ро░роЩрпНроХро│рпН"
            },
            'back_menu': {
                'english': "тЖР Back to Menu",
                'hindi': "тЖР рдореЗрдиреВ рдкрд░ рд╡рд╛рдкрд╕",
                'tamil': "тЖР роорпЖройрпБро╡ро┐ро▒рпНроХрпБродрпН родро┐ро░рпБроорпНрокрпБ"
            },
            'describe_symptom': {
                'english': "ЁЯй║ Describe your symptom:",
                'hindi': "ЁЯй║ рдЕрдкрдиреЗ рд▓рдХреНрд╖рдг рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ:",
                'tamil': "ЁЯй║ роЙроЩрпНроХро│рпН роЕро▒ро┐роХрпБро▒ро┐ропрпИ ро╡ро┐ро╡ро░ро┐роХрпНроХро╡рпБроорпН:"
            },
            'voice_input': {
                'english': "ЁЯОд Voice",
                'hindi': "ЁЯОд рдЖрд╡рд╛рдЬрд╝",
                'tamil': "ЁЯОд роХрпБро░ро▓рпН"
            },
            'analyze': {
                'english': "ЁЯФН Analyze",
                'hindi': "ЁЯФН рд╡рд┐рд╢реНрд▓реЗрд╖рдг",
                'tamil': "ЁЯФН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ"
            },
            'listening': {
                'english': "ЁЯОд Listening... Speak now",
                'hindi': "ЁЯОд рд╕реБрди рд░рд╣реЗ рд╣реИрдВ... рдЕрдм рдмреЛрд▓реЗрдВ",
                'tamil': "ЁЯОд роХрпЗроЯрпНроЯрпБроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ро▒родрпБ... роЗрокрпНрокрпЛродрпБ рокрпЗроЪрпБроЩрпНроХро│рпН"
            },
            'processing': {
                'english': "тП│ Processing your input...",
                'hindi': "тП│ рдЖрдкрдХреА рдмрд╛рдд рдХреЛ рд╕рдордЭ рд░рд╣реЗ рд╣реИрдВ...",
                'tamil': "тП│ роЙроЩрпНроХро│рпН роЙро│рпНро│рпАроЯрпНроЯрпИ роЪрпЖропро▓ро╛роХрпНроХрпБроХро┐ро▒родрпБ..."
            },
            'no_match': {
                'english': "I couldn't find an exact match for your symptom. Here are some general healthcare tips:",
                'hindi': "рдореБрдЭреЗ рдЖрдкрдХреЗ рд▓рдХреНрд╖рдг рдХрд╛ рд╕рдЯреАрдХ рдореЗрд▓ рдирд╣реАрдВ рдорд┐рд▓рд╛ред рдпрд╣рд╛рдВ рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрд╡рд╛рд╕реНрдереНрдп рджреЗрдЦрднрд╛рд▓ рдпреБрдХреНрддрд┐рдпрд╛рдВ рджреА рдЧрдИ рд╣реИрдВ:",
                'tamil': "роЙроЩрпНроХро│рпН роЕро▒ро┐роХрпБро▒ро┐роХрпНроХро╛рой роЪро░ро┐ропро╛рой рокрпКро░рпБродрпНродродрпНродрпИ роОройрпНройро╛ро▓рпН роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХ роорпБроЯро┐ропро╡ро┐ро▓рпНро▓рпИ. роЗроЩрпНроХрпБ роЪро┐ро▓ рокрпКродрпБ роЪрпБроХро╛родро╛ро░ роЙродро╡ро┐роХрпНроХрпБро▒ро┐рокрпНрокрпБроХро│рпН роЙро│рпНро│рой:"
            },
            'voice_error': {
                'english': "Voice not recognized. Please try again or use text input.",
                'hindi': "рдЖрд╡рд╛рдЬрд╝ рдкрд╣рдЪрд╛рдиреА рдирд╣реАрдВ рдЧрдИред рдХреГрдкрдпрд╛ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ рдпрд╛ рдЯреЗрдХреНрд╕реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред",
                'tamil': "роХрпБро░ро▓рпН роЕро▒ро┐ропрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роЙро░рпИ роЙро│рпНро│рпАроЯрпНроЯрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН."
            },
            'symptom_label': {
                'english': "ЁЯУЛ Symptom",
                'hindi': "ЁЯУЛ рд▓рдХреНрд╖рдг",
                'tamil': "ЁЯУЛ роЕро▒ро┐роХрпБро▒ро┐"
            },
            'confidence_label': {
                'english': "ЁЯОп Confidence",
                'hindi': "ЁЯОп рд╡рд┐рд╢реНрд╡рд╛рд╕",
                'tamil': "ЁЯОп роироорпНрокро┐роХрпНроХрпИ"
            },
            'severity_label': {
                'english': "тЪая╕П Severity",
                'hindi': "тЪая╕П рдЧрдВрднреАрд░рддрд╛",
                'tamil': "тЪая╕П родрпАро╡ро┐ро░роорпН"
            },
            'advice_label': {
                'english': "ЁЯТб Advice",
                'hindi': "ЁЯТб рд╕рд▓рд╛рд╣",
                'tamil': "ЁЯТб роЖро▓рпЛроЪройрпИ"
            },
            'first_aid_label': {
                'english': "ЁЯй╣ First Aid",
                'hindi': "ЁЯй╣ рдкреНрд░рд╛рдердорд┐рдХ рдЙрдкрдЪрд╛рд░",
                'tamil': "ЁЯй╣ роорпБродро▓рпБродро╡ро┐"
            },
            'emergency_button' : {
    'english': "ЁЯЪи Emergency",
    'hindi': "ЁЯЪи рдЖрдкрд╛рддрдХрд╛рд▓реАрди",
    'tamil': "ЁЯЪи роЕро╡роЪро░роорпН"
},

'emergency_alert' : {
    'english': "Emergency alert sent! Please wait for the ambulance and follow first aid instructions.",
    'hindi': "рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕реВрдЪрдирд╛ рднреЗрдЬреА рдЧрдИ! рдХреГрдкрдпрд╛ рдПрдореНрдмреБрд▓реЗрдВрд╕ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВ рдФрд░ рдкреНрд░рд╛рдердорд┐рдХ рдЙрдкрдЪрд╛рд░ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред",
    'tamil': "роЕро╡роЪро░роЪрпН роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ! роЕроорпНрокрпБро▓ройрпНро╕рпН ро╡ро░рпБро╡родрпИроХрпН роХро╛родрпНродро┐ро░рпБроирпНродрпБ роорпБродро▓рпБродро╡ро┐ ро╡ро┤ро┐роорпБро▒рпИроХро│рпИ рокро┐ройрпНрокро▒рпНро▒ро╡рпБроорпН."
},
'general_health_tips': {
    'english': [
        "ЁЯТз Stay hydrated by drinking plenty of water throughout the day",
        "ЁЯеЧ Eat a balanced diet with fruits and vegetables",
        "ЁЯШ┤ Get 7-8 hours of quality sleep each night",
        "ЁЯзШ Practice stress-reduction techniques like deep breathing",
        "ЁЯЪ╢ Stay active with regular light exercise",
        "ЁЯз╝ Wash hands frequently to prevent infections",
        "ЁЯМЮ Get some sunlight exposure for vitamin D",
        "ЁЯЪн Avoid smoking and limit alcohol consumption"
    ],
    'hindi': [
        "ЁЯТз рджрд┐рди рднрд░ рдореЗрдВ рдЦреВрдм рдкрд╛рдиреА рдкреАрдХрд░ рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВ",
        "ЁЯеЧ рдлрд▓реЛрдВ рдФрд░ рд╕рдмреНрдЬрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрддреБрд▓рд┐рдд рдЖрд╣рд╛рд░ рд▓реЗрдВ",
        "ЁЯШ┤ рд╣рд░ рд░рд╛рдд 7-8 рдШрдВрдЯреЗ рдХреА рдЧреБрдгрд╡рддреНрддрд╛рдкреВрд░реНрдг рдиреАрдВрдж рд▓реЗрдВ",
        "ЁЯз┤ рдЧрд╣рд░реА рд╕рд╛рдВрд╕ рд▓реЗрдиреЗ рдЬреИрд╕реА рддрдирд╛рд╡ рдХрдо рдХрд░рдиреЗ рд╡рд╛рд▓реА рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ",
        "ЁЯЪ╢ рдирд┐рдпрдорд┐рдд рд╣рд▓реНрдХреЗ рд╡реНрдпрд╛рдпрд╛рдо рд╕реЗ рд╕рдХреНрд░рд┐рдп рд░рд╣реЗрдВ",
        "ЁЯз╝ рд╕рдВрдХреНрд░рдордг рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рд░-рдмрд╛рд░ рд╣рд╛рде рдзреЛрдПрдВ",
        "ЁЯМЮ рд╡рд┐рдЯрд╛рдорд┐рди рдбреА рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдзреВрдк рд▓реЗрдВ",
        "ЁЯЪн рдзреВрдореНрд░рдкрд╛рди рд╕реЗ рдмрдЪреЗрдВ рдФрд░ рд╢рд░рд╛рдм рдХрд╛ рд╕реЗрд╡рди рд╕реАрдорд┐рдд рдХрд░реЗрдВ"
    ],
    'tamil': [
        "ЁЯТз роиро╛ро│рпН роорпБро┤рпБро╡родрпБроорпН роиро┐ро▒рпИроп родрогрпНрогрпАро░рпН роХрпБроЯро┐родрпНродрпБ роирпАро░рпЗро▒рпНро▒роорпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН",
        "ЁЯеЧ рокро┤роЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роХро╛ропрпНроХро▒ро┐роХро│рпБроЯройрпН роЪроороЪрпНроЪрпАро░рпН роЙрогро╡рпИ роЙрогрпНрогрпБроЩрпНроХро│рпН",
        "ЁЯШ┤ роТро╡рпНро╡рпКро░рпБ роЗро░ро╡рпБроорпН 7-8 роорогро┐ роирпЗро░роорпН родро░рооро╛рой родрпВроХрпНроХроорпН рокрпЖро▒рпБроЩрпНроХро│рпН",
        "ЁЯз┤ роЖро┤рпНроорпВроЪрпНроЪрпБ рокрпЛройрпНро▒ роорой роЕро┤рпБродрпНродроХрпН роХрпБро▒рпИрокрпНрокрпБ роирпБроЯрпНрокроЩрпНроХро│рпИ рокропро┐ро▒рпНроЪро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН",
        "ЁЯЪ╢ ро╡ро┤роХрпНроХрооро╛рой роЗро▓роХрпБро╡ро╛рой роЙроЯро▒рпНрокропро┐ро▒рпНроЪро┐ропрпБроЯройрпН роЪрпБро▒рпБроЪрпБро▒рпБрокрпНрокро╛роХ роЗро░рпБроЩрпНроХро│рпН",
        "ЁЯз╝ родрпКро▒рпНро▒рпБроирпЛропрпНроХро│рпИродрпН родроЯрпБроХрпНроХ роЕроЯро┐роХрпНроХроЯро┐ роХрпИроХро│рпИ роХро┤рпБро╡рпБроЩрпНроХро│рпН",
        "ЁЯМЮ ро╡рпИроЯрпНроЯрооро┐ройрпН роЯро┐-роХрпНроХрпБ роЪро┐ро▒ро┐родрпБ роЪрпВро░ро┐роп роТро│ро┐ рокрпЖро▒рпБроЩрпНроХро│рпН",
        "ЁЯЪн рокрпБроХрпИрокрпНрокродрпИродрпН родро╡ро┐ро░рпНродрпНродрпБ роородрпБ роЕро░рпБроирпНродрпБро╡родрпИ роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН"
    ]
}

        };

        // Get translated text
        function getText(key) {
            return translations[key] && translations[key][currentLanguage] || key;
        }

        // Update UI language
        function updateLanguage() {
            document.getElementById('main-title').textContent = getText('welcome_title');
            document.getElementById('disclaimer').textContent = getText('disclaimer');
            document.getElementById('menu-diagnosis').textContent = getText('menu_diagnosis');
            document.getElementById('menu-language').textContent = getText('menu_language');
            document.getElementById('menu-symptoms').textContent = getText('menu_symptoms');
            document.getElementById('menu-stats').textContent = getText('menu_stats');
            document.getElementById('diagnosis-title').textContent = getText('diagnosis_title');
            document.getElementById('symptoms-title').textContent = getText('symptoms_title');
            document.getElementById('stats-title').textContent = getText('stats_title');
            document.getElementById('back-btn').textContent = getText('back_menu');
            document.getElementById('back-btn2').textContent = getText('back_menu');
            document.getElementById('back-btn3').textContent = getText('back_menu');
            document.getElementById('input-prompt').textContent = getText('describe_symptom');
            document.getElementById('voice-btn').innerHTML = getText('voice_input');
            
            // Update placeholder text
            document.getElementById('symptom-input').placeholder = 
                currentLanguage === 'english' ? 'Type your symptom here...' :
                currentLanguage === 'hindi' ? 'рдЕрдкрдирд╛ рд▓рдХреНрд╖рдг рдпрд╣рд╛рдБ рдЯрд╛рдЗрдк рдХрд░реЗрдВ...' :
                'роЙроЩрпНроХро│рпН роЕро▒ро┐роХрпБро▒ро┐ропрпИ роЗроЩрпНроХрпЗ родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНроХ...';
                updateEmergencyButtonLabel();
        }

        // Enhanced speech recognition with better language support
        
        // Enhanced speech recognition with better language support

function initSpeechRecognition() {
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.continuous = false;
        recognition.interimResults = true;
        recognition.maxAlternatives = 5;
        
        // Set language based on current selection
        const langMapping = {
            'english': 'en-IN',
            'hindi': 'hi-IN',
            'tamil': 'ta-IN'
        };
        recognition.lang = langMapping[currentLanguage];
        
        recognition.onstart = function() {
            isListening = true;
            showVoiceStatus(getText('listening'), 'listening');
            document.getElementById('voice-btn').innerHTML = 'ЁЯЫС ' + (currentLanguage === 'english' ? 'Stop' : currentLanguage === 'hindi' ? 'рд░реЛрдХреЗрдВ' : 'роиро┐ро▒рпБродрпНродрпБ');
        };
        
        recognition.onresult = function(event) {
            let finalTranscript = '';
            let interimTranscript = '';
            
            for (let i = event.resultIndex; i < event.results.length; i++) {
                const transcript = event.results[i][0].transcript;
                if (event.results[i].isFinal) {
                    finalTranscript += transcript;
                } else {
                    interimTranscript += transcript;
                }
            }
            
            if (finalTranscript) {
                document.getElementById('symptom-input').value = finalTranscript.trim();
                
                const confidenceText = {
                    'english': `Voice recognized: "${finalTranscript.trim()}"`,
                    'hindi': `рдЖрд╡рд╛рдЬрд╝ рдкрд╣рдЪрд╛рдиреА рдЧрдИ: "${finalTranscript.trim()}"`,
                    'tamil': `роХрпБро░ро▓рпН роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ: "${finalTranscript.trim()}"`
                }[currentLanguage];
                
                showVoiceStatus(confidenceText, 'listening');
                
                usageStats.voiceQueries++;
                saveStats();
                
                setTimeout(() => {
                    hideVoiceStatus();
                    processSymptom();
                }, 1500);
            } else if (interimTranscript) {
                document.getElementById('symptom-input').value = interimTranscript.trim();
            }
        };
        
        recognition.onerror = function(event) {
            console.log('Speech recognition error:', event.error);
            let errorMessage = getText('voice_error');
            showVoiceStatus(errorMessage, 'error');
            setTimeout(hideVoiceStatus, 4000);
        };
        
        recognition.onend = function() {
            isListening = false;
            document.getElementById('voice-btn').innerHTML = getText('voice_input');
        };
    }
}
// Function to clear diagnosis screen
function clearDiagnosisScreen() {
    document.getElementById('symptom-input').value = '';
    document.getElementById('results').style.display = 'none';
    document.getElementById('results').innerHTML = '';
    hideVoiceStatus();
}

        // Language selection with voice recognition initialization
       function selectLanguage(lang) {
    currentLanguage = lang;
    updateLanguage();
    
    // Clear any existing diagnosis data
    clearDiagnosisScreen();
    
    showMainMenu();
    
    // Reinitialize speech recognition with new language
    initSpeechRecognition();
    
    // Welcome message in selected language
    const welcomeMessage = getText('welcome_title').replace(/[ЁЯПе]/g, '');
    speakText(welcomeMessage);
}
        // Enhanced text-to-speech
        function speakText(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                const langMapping = {
                    'english': 'en-IN',
                    'hindi': 'hi-IN', 
                    'tamil': 'ta-IN'
                };
                
                utterance.lang = langMapping[currentLanguage] || 'en-IN';
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 0.8;
                
                const voices = speechSynthesis.getVoices();
                const preferredVoice = voices.find(voice => 
                    voice.lang.startsWith(utterance.lang.split('-')[0])
                );
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                }
                
                speechSynthesis.speak(utterance);
            }
        }

        // Show/hide screens
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function showLanguageSelector() {
    // Clear diagnosis data when going to language selector
    clearDiagnosisScreen();
    
    showScreen('language-screen');
}
        function showMainMenu() {
            showScreen('main-screen');
            updateStats();
        }

        function showSymptomDiagnosis() {
    // Clear previous results when entering diagnosis screen
    clearDiagnosisScreen();
    
    showScreen('diagnosis-screen');
    document.getElementById('symptom-input').focus();
}

        function showAllSymptoms() {
            showScreen('symptoms-screen');
            loadAllSymptoms();
        }

        function showUsageStats() {
            showScreen('stats-screen');
            updateStatsDisplay();
        }

        // Enhanced voice input
        // Enhanced voice input with better language detection
function startVoiceInput() {
    if (!recognition) {
        const alertText = {
            'english': 'Speech recognition not supported. Please use Chrome browser.',
            'hindi': 'рд╡реЙрдЗрд╕ рдкрд╣рдЪрд╛рди рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред рдХреГрдкрдпрд╛ рдХреНрд░реЛрдо рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред',
            'tamil': 'рокрпЗроЪрпНроЪрпБ роЕроЩрпНроХрпАроХро╛ро░роорпН роЖродро░ро┐роХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ. роХро┐ро░рпЛроорпН роЙро▓ро╛ро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН.'
        }[currentLanguage];
        alert(alertText);
        return;
    }
    
    if (isListening) {
        recognition.stop();
        return;
    }
    
    // Update language before starting
    const langMapping = {
        'english': 'en-IN',
        'hindi': 'hi-IN',
        'tamil': 'ta-IN'
    };
    recognition.lang = langMapping[currentLanguage];
    
    try {
        recognition.start();
    } catch (error) {
        console.error('Voice recognition start error:', error);
        showVoiceStatus('Could not start voice recognition. Try again.', 'error');
        setTimeout(hideVoiceStatus, 3000);
    }
}
        // Show voice status
        function showVoiceStatus(message, className) {
            const statusDiv = document.getElementById('voice-status');
            statusDiv.textContent = message;
            statusDiv.className = 'voice-status ' + className;
            statusDiv.style.display = 'block';
        }

        function hideVoiceStatus() {
            document.getElementById('voice-status').style.display = 'none';
        }

        // Process symptom input
        function processSymptom() {
            const symptomInput = document.getElementById('symptom-input').value.trim();
            if (!symptomInput) {
                alert('Please enter a symptom or use voice input');
                return;
            }

            usageStats.totalQueries++;
            saveStats();

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>${getText('processing')}</div>
                </div>
            `;
            resultsDiv.style.display = 'block';

            fetch(`http://localhost:5000/diagnose`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    symptom: symptomInput,
                    language: currentLanguage
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success && data.result) {
                    displayResult(data.result);
                    usageStats.successfulMatches++;
                } else {
                    displayGeneralHealthTips();
                }
                saveStats();
            })
            .catch(error => {
                console.log('Backend not available, using simulation');
                simulateDiagnosis(symptomInput);
            });
        }

        // Enhanced simulation with better language support
       // Enhanced simulation with better symptom matching
function simulateDiagnosis(symptomInput) {
    const symptoms = {
        'fever': {
            name: { english: "Fever", hindi: "рдмреБрдЦрд╛рд░", tamil: "роХро╛ропрпНроЪрпНроЪро▓рпН" },
            severity: "H", confidence: 92,
            advice: {
                english: "Rest, drink plenty of fluids, and take paracetamol as directed. Monitor temperature regularly.",
                hindi: "рдЖрд░рд╛рдо рдХрд░реЗрдВ, рдЦреВрдм рд╕рд╛рд░реЗ рддрд░рд▓ рдкрджрд╛рд░реНрде рдкрд┐рдПрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд╛рдиреБрд╕рд╛рд░ рдкреЗрд░рд╛рд╕рд┐рдЯрд╛рдореЛрд▓ рд▓реЗрдВред рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рддрд╛рдкрдорд╛рди рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВред",
                tamil: "роУропрпНро╡рпЖроЯрпБроХрпНроХро╡рпБроорпН, роиро┐ро▒рпИроп родро┐ро░ро╡роЩрпНроХро│рпИ роХрпБроЯро┐роХрпНроХро╡рпБроорпН, рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпНроЯрокроЯро┐ рокро╛ро░ро╛роЪро┐роЯрпНроЯрооро╛ро▓рпН роОроЯрпБродрпНродрпБроХрпН роХрпКро│рпНро│рпБроЩрпНроХро│рпНред ро╡рпЖрокрпНрокроиро┐ро▓рпИропрпИ родро╡ро▒ро╛рооро▓рпН роХрогрпНроХро╛рогро┐роХрпНроХро╡рпБроорпН."
            },
            first_aid: {
                english: "Apply cool compresses to forehead, take a lukewarm bath, and stay hydrated.",
                hindi: "рдорд╛рдереЗ рдкрд░ рдардВрдбреА рд╕рд┐рдХрд╛рдИ рдХрд░реЗрдВ, рдЧреБрдирдЧреБрдиреЗ рдкрд╛рдиреА рд╕реЗ рд╕реНрдирд╛рди рдХрд░реЗрдВ рдФрд░ рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВред",
                tamil: "роирпЖро▒рпНро▒ро┐ропро┐ро▓рпН роХрпБро│ро┐ро░рпНроирпНрод родрпБрогро┐роХро│рпИ ро╡рпИроХрпНроХро╡рпБроорпН, роЗро│роорпН ро╡рпЖроирпНроирпАро░ро┐ро▓рпН роХрпБро│ро┐роХрпНроХро╡рпБроорпН, роирпАро░рпЗро▒рпНро▒роорпН рокрпЖро▒рпБро╡родрпИ роЙро▒рпБродро┐роЪрпЖропрпНропро╡рпБроорпН."
            }
        },
        'cough': {
            name: { english: "Cough", hindi: "рдЦрд╛рдВрд╕реА", tamil: "роЗро░рпБрооро▓рпН" },
            severity: "H", confidence: 85,
            advice: {
                english: "Stay hydrated, use cough drops, avoid irritants like smoke, and consider steam inhalation.",
                hindi: "рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВ, рдЦрд╛рдВрд╕реА рдХреА рдЧреЛрд▓рд┐рдпрд╛рдБ рд▓реЗрдВ, рдзреБрдПрдВ рдЬреИрд╕реЗ рдЙрддреНрддреЗрдЬрдХ рдкрджрд╛рд░реНрдереЛрдВ рд╕реЗ рдмрдЪреЗрдВ рдФрд░ рднрд╛рдк рд▓реЗрдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред",
                tamil: "роирпАро░рпЗро▒рпНро▒роорпН рокрпЖро▒рпБро╡родрпИродрпН родрпКроЯро░ро╡рпБроорпН, роЗро░рпБрооро▓рпН рооро╛родрпНродро┐ро░рпИроХро│рпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН, рокрпБроХрпИ рокрпЛройрпНро▒ роОро░ро┐роЪрпНроЪро▓рпВроЯрпНроЯрпБроорпН рокрпКро░рпБроЯрпНроХро│рпИродрпН родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН, роирпАро░ро╛ро╡ро┐ роЪрпБро╡ро╛роЪро┐рокрпНрокродрпИроХрпН роХро░рпБродрпНродро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН."
            },
            first_aid: {
                english: "Gargle with warm salt water, drink honey and lemon tea, and use a humidifier.",
                hindi: "рдЧрд░реНрдо рдирдордХ рдХреЗ рдкрд╛рдиреА рд╕реЗ рдЧрд░рд╛рд░реЗ рдХрд░реЗрдВ, рд╢рд╣рдж рдФрд░ рдиреАрдВрдмреВ рдХреА рдЪрд╛рдп рдкрд┐рдПрдВ рдФрд░ рд╣реНрдпреВрдорд┐рдбрд┐рдлрд╛рдпрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред",
                tamil: "роЪрпВроЯро╛рой роЙрокрпНрокрпБ роирпАро░ро╛ро▓рпН роХрпКрокрпНрокро│ро┐роХрпНроХро╡рпБроорпН, родрпЗройрпБроорпН роОро▓рпБрооро┐роЪрпНроЪрпИропрпБроорпН роХро▓роирпНрод родрпЗроирпАро░рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН, роИро░рокрпНрокродроорпВроЯрпНроЯро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН."
            }
        },
        'headache': {
            name: { english: "Headache", hindi: "рд╕рд┐рд░рджрд░реНрдж", tamil: "родро▓рпИро╡ро▓ро┐" },
            severity: "H", confidence: 88,
            advice: {
                english: "Rest in a quiet, dark room. Apply cold compress and take pain relievers if needed.",
                hindi: "рд╢рд╛рдВрдд, рдЕрдВрдзреЗрд░реЗ рдХрдорд░реЗ рдореЗрдВ рдЖрд░рд╛рдо рдХрд░реЗрдВред рдардВрдбреА рд╕рд┐рдХрд╛рдИ рдХрд░реЗрдВ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рджрд░реНрдж рдирд┐рд╡рд╛рд░рдХ рд▓реЗрдВред",
                tamil: "роЕроорпИродро┐ропро╛рой, роЗро░рпБрогрпНроЯ роЕро▒рпИропро┐ро▓рпН роУропрпНро╡рпЖроЯрпБроХрпНроХро╡рпБроорпН. роХрпБро│ро┐ро░рпНроирпНрод роТродрпНродроЯроорпН роХрпКроЯрпБроЩрпНроХро│рпН, родрпЗро╡рпИрокрпНрокроЯрпНроЯро╛ро▓рпН ро╡ро▓ро┐ роиро┐ро╡ро╛ро░рогро┐роХро│рпН роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНро│рпБроЩрпНроХро│рпН."
            },
            first_aid: {
                english: "Drink water, avoid bright lights, and massage temples gently.",
                hindi: "рдкрд╛рдиреА рдкрд┐рдПрдВ, рддреЗрдЬ рд░реЛрд╢рдиреА рд╕реЗ рдмрдЪреЗрдВ рдФрд░ рдХрдирдкрдЯреА рдХреА рдзреАрд░реЗ рд╕реЗ рдорд╛рд▓рд┐рд╢ рдХрд░реЗрдВред",
                tamil: "родрогрпНрогрпАро░рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН, рокро┐ро░роХро╛роЪрооро╛рой ро╡ро┐ро│роХрпНроХрпБроХро│рпИродрпН родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН, роХройрпНройродрпНродрпИ роорпЖродрпБро╡ро╛роХ роороЪро╛роЬрпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН."
            }
        }
    };
    
    // Enhanced matching - normalize input and check multiple variations
    const input = symptomInput.toLowerCase().trim();
    let matchedSymptom = null;
    
    // Create comprehensive matching patterns
    const feverPatterns = ['fever', 'fevar', 'fiver', 'temperature', 'temp', 'hot', 'рдмреБрдЦрд╛рд░', 'рддрд╛рдкрдорд╛рди', 'рдЧрд░реНрдореА', 'рдХрд╛рдпреНрдЪрд▓', 'роХро╛ропрпНроЪрпНроЪро▓рпН', 'ро╡рпЖрокрпНрокроорпН', 'роЪрпВроЯрпБ'];
    const coughPatterns = ['cough', 'cof', 'kof', 'throat', 'cold', 'рдЦрд╛рдВрд╕реА', 'рдЧрд▓рд╛', 'рд╕рд░реНрджреА', 'рдЗрд░реБрдорд▓', 'роЗро░рпБрооро▓рпН', 'родрпКрогрпНроЯрпИ', 'роЪро│ро┐'];
    const headachePatterns = ['headache', 'head', 'ache', 'migraine', 'рд╕рд┐рд░рджрд░реНрдж', 'рд╕рд┐рд░', 'рдорд╛рдЗрдЧреНрд░реЗрди', 'рддрд▓реИрд╡рд▓реА', 'родро▓рпИро╡ро▓ро┐', 'родро▓рпИ', 'роорпИроХрпНро░рпЗройрпН'];
    
    // Check each pattern
    if (feverPatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.fever;
    } else if (coughPatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.cough;
    } else if (headachePatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.headache;
    }
    
    if (matchedSymptom) {
        displayResult(matchedSymptom);
        usageStats.successfulMatches++;
        saveStats();
    } else {
        displayGeneralHealthTips();
    }
}

        // Display symptom result with enhanced language support
        function displayResult(data) {
    const resultsDiv = document.getElementById('results');
    
    const severityClass = data.severity;
    const severityText = {
        'H': {'english': 'ЁЯПа HOME CARE', 'hindi': 'ЁЯПа рдШрд░реЗрд▓реВ рджреЗрдЦрднрд╛рд▓', 'tamil': 'ЁЯПа ро╡рпАроЯрпНроЯро┐ро▓рпН рокро░ро╛рооро░ро┐рокрпНрокрпБ'},
        'D': {'english': 'ЁЯСитАНтЪХя╕П DOCTOR VISIT', 'hindi': 'ЁЯСитАНтЪХя╕П рдбреЙрдХреНрдЯрд░ рдХреЛ рджрд┐рдЦрд╛рдПрдБ', 'tamil': 'ЁЯСитАНтЪХя╕П рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН'},
        'E': {'english': 'ЁЯЪи EMERGENCY', 'hindi': 'ЁЯЪи рдЖрдкрд╛рддрдХрд╛рд▓', 'tamil': 'ЁЯЪи роЕро╡роЪро░роорпН'}
    }[data.severity][currentLanguage];

    const symptomName = data.name && data.name[currentLanguage] ? data.name[currentLanguage] : data.name;
    const advice = data.advice && data.advice[currentLanguage] ? data.advice[currentLanguage] : data.advice;
    const firstAid = data.first_aid && data.first_aid[currentLanguage] ? data.first_aid[currentLanguage] : data.first_aid;

    resultsDiv.innerHTML = `
        <div class="symptom-card">
            <div class="symptom-header">
                <div class="symptom-name">${symptomName}</div>
                <div class="confidence">${data.confidence}% ${getText('confidence_label')}</div>
            </div>
            
            <div class="severity ${severityClass}">
                ${getText('severity_label')}: ${severityText}
            </div>
            
            <div class="advice-section">
                <div class="section-title">${getText('advice_label')}</div>
                <div>${advice}</div>
            </div>
            
            <div class="advice-section">
                <div class="section-title">${getText('first_aid_label')}</div>
                <div>${firstAid}</div>
            </div>
        </div>
    `;
    
    resultsDiv.style.display = 'block';
    
    // Speak out the result in user's language
    const resultText = `${symptomName}. ${severityText}. ${advice}. ${firstAid}`;
    speakText(resultText);
}

        // Display general health tips when no specific match is found
        function displayGeneralHealthTips() {
            const resultsDiv = document.getElementById('results');
            
            // Get 4 random health tips
            const allTips = getText('general_health_tips');
            const randomTips = [...allTips].sort(() => 0.5 - Math.random()).slice(0, 4);
            
            resultsDiv.innerHTML = `
                <div class="general-advice">
                    <h3>${getText('no_match')}</h3>
                    <ul class="advice-list">
                        ${randomTips.map(tip => `<li>${tip}</li>`).join('')}
                    </ul>
                    <p style="margin-top: 15px; font-style: italic;">
                        ${currentLanguage === 'english' ? 'If symptoms persist or worsen, please consult a healthcare professional.' : 
                          currentLanguage === 'hindi' ? 'рдпрджрд┐ рд▓рдХреНрд╖рдг рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдмрд┐рдЧрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдХреГрдкрдпрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рджреЗрдЦрднрд╛рд▓ рдкреЗрд╢реЗрд╡рд░ рд╕реЗ рд╕рд▓рд╛рд╣ рд▓реЗрдВред' :
                          'роЕро▒ро┐роХрпБро▒ро┐роХро│рпН родрпКроЯро░рпНроирпНродрпБ роЗро░рпБроирпНродро╛ро▓рпН роЕро▓рпНро▓родрпБ роорпЛроЪроороЯрпИроирпНродро╛ро▓рпН, родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роЪрпБроХро╛родро╛ро░ роиро┐рокрпБрогро░рпИроХрпН роХро▓роирпНродро╛ро▓рпЛроЪро┐роХрпНроХро╡рпБроорпН.'}
                    </p>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            
            // Speak the health tips
            const tipsText = getText('no_match') + '. ' + randomTips.join('. ');
            speakText(tipsText);
        }

        // Load all symptoms with proper language support
        async function loadAllSymptoms() {
    try {
        const response = await fetch(`http://localhost:5000/symptoms?lang=${currentLanguage}`);
        const data = await response.json();

        const symptomsList = document.getElementById('symptoms-list');
        let html = '';

        if (data.success && data.symptoms && data.symptoms.length > 0) {
            data.symptoms.forEach(symptom => {
                let symptomName, advice;
                
                // Extract symptom name based on current language
                if (typeof symptom === 'object') {
                    if (symptom.name && typeof symptom.name === 'object') {
                        symptomName = symptom.name[currentLanguage] || symptom.name.english || symptom.name;
                    } else {
                        symptomName = symptom.name || symptom;
                    }
                    
                    // Extract advice based on current language
                    if (symptom.advice && typeof symptom.advice === 'object') {
                        advice = symptom.advice[currentLanguage] || symptom.advice.english || '';
                    } else {
                        advice = symptom.advice || '';
                    }
                } else {
                    symptomName = symptom;
                    advice = '';
                }

                const severity = symptom.severity || 'H';
                const severityText = {
                    'H': {
                        'english': 'ЁЯПа Home Care',
                        'hindi': 'ЁЯПа рдШрд░реЗрд▓реВ рджреЗрдЦрднрд╛рд▓', 
                        'tamil': 'ЁЯПа ро╡рпАроЯрпНроЯро┐ро▓рпН рокро░ро╛рооро░ро┐рокрпНрокрпБ'
                    },
                    'D': {
                        'english': 'ЁЯСитАНтЪХя╕П Doctor Visit',
                        'hindi': 'ЁЯСитАНтЪХя╕П рдбреЙрдХреНрдЯрд░ рдХреЛ рджрд┐рдЦрд╛рдПрдБ',
                        'tamil': 'ЁЯСитАНтЪХя╕П рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН'
                    },
                    'E': {
                        'english': 'ЁЯЪи Emergency',
                        'hindi': 'ЁЯЪи рдЖрдкрд╛рддрдХрд╛рд▓',
                        'tamil': 'ЁЯЪи роЕро╡роЪро░роорпН'
                    }
                }[severity][currentLanguage];

                html += `
                    <div class="symptom-item">
                        <div>
                            <strong>${symptomName}</strong>
                            ${advice ? `<br><small>${advice.substring(0, 100)}${advice.length > 100 ? '...' : ''}</small>` : ''}
                        </div>
                        <div class="severity ${severity}">${severityText}</div>
                    </div>
                `;
            });
        } else {
            const noSymptomsText = {
                'english': 'No symptoms found for this language',
                'hindi': 'рдЗрд╕ рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд▓рдХреНрд╖рдг рдирд╣реАрдВ рдорд┐рд▓рд╛',
                'tamil': 'роЗроирпНрод роорпКро┤ро┐ропро┐ро▓рпН роЕро▒ро┐роХрпБро▒ро┐роХро│рпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ'
            }[currentLanguage];
            html = `<div class="error">${noSymptomsText}</div>`;
        }

        symptomsList.innerHTML = html;
    } catch (error) {
        console.error('Error loading symptoms:', error);
        
        // Enhanced sample symptoms with proper multilingual structure
        const sampleSymptoms = {
            'english': [
                { 
                    name: 'Fever', 
                    severity: 'H', 
                    advice: 'Take rest and drink plenty of fluids. Use cold compress on forehead.' 
                },
                { 
                    name: 'Cough', 
                    severity: 'H', 
                    advice: 'Drink warm water with honey. Use steam inhalation.' 
                },
                { 
                    name: 'Headache', 
                    severity: 'H', 
                    advice: 'Take rest in dark quiet room. Apply cold compress.' 
                },
                { 
                    name: 'Chest Pain', 
                    severity: 'E', 
                    advice: 'Stop all activity. Sit down and rest. Call emergency.' 
                },
                { 
                    name: 'Snake Bite', 
                    severity: 'E', 
                    advice: 'DO NOT cut the wound. Keep patient calm. Rush to hospital.' 
                },
                { 
                    name: 'Stomach Pain', 
                    severity: 'D', 
                    advice: 'Avoid solid food for few hours. Take small sips of water.' 
                }
            ],
            'hindi': [
                { 
                    name: 'рдмреБрдЦрд╛рд░', 
                    severity: 'H', 
                    advice: 'рдЖрд░рд╛рдо рдХрд░реЗрдВ рдФрд░ рдЦреВрдм рдкрд╛рдиреА рдкрд┐рдПрдВред рдорд╛рдереЗ рдкрд░ рдардВрдбреА рдкрдЯреНрдЯреА рд░рдЦреЗрдВред' 
                },
                { 
                    name: 'рдЦрд╛рдВрд╕реА', 
                    severity: 'H', 
                    advice: 'рд╢рд╣рдж рдХреЗ рд╕рд╛рде рдЧрд░реНрдо рдкрд╛рдиреА рдкрд┐рдПрдВред рднрд╛рдк рд▓реЗрдВред' 
                },
                { 
                    name: 'рд╕рд┐рд░ рджрд░реНрдж', 
                    severity: 'H', 
                    advice: 'рдЕрдВрдзреЗрд░реЗ рдФрд░ рд╢рд╛рдВрдд рдХрдорд░реЗ рдореЗрдВ рдЖрд░рд╛рдо рдХрд░реЗрдВред рдардВрдбреА рд╕рд┐рдХрд╛рдИ рдХрд░реЗрдВред' 
                },
                { 
                    name: 'рдЫрд╛рддреА рдореЗрдВ рджрд░реНрдж', 
                    severity: 'E', 
                    advice: 'рд╕рднреА рдЧрддрд┐рд╡рд┐рдзрд┐рдпрд╛рдВ рдмрдВрдж рдХрд░реЗрдВред рдмреИрдардХрд░ рдЖрд░рд╛рдо рдХрд░реЗрдВред рдЖрдкрд╛рддрдХрд╛рд▓ рдмреБрд▓рд╛рдПрдВред' 
                },
                { 
                    name: 'рд╕рд╛рдВрдк рдХрд╛ рдХрд╛рдЯрдирд╛', 
                    severity: 'E', 
                    advice: 'рдШрд╛рд╡ рдХреЛ рди рдХрд╛рдЯреЗрдВред рдорд░реАрдЬрд╝ рдХреЛ рд╢рд╛рдВрдд рд░рдЦреЗрдВред рддреБрд░рдВрдд рдЕрд╕реНрдкрддрд╛рд▓ рд▓реЗ рдЬрд╛рдПрдВред' 
                },
                { 
                    name: 'рдкреЗрдЯ рджрд░реНрдж', 
                    severity: 'D', 
                    advice: 'рдХреБрдЫ рдШрдВрдЯреЛрдВ рддрдХ рдареЛрд╕ рднреЛрдЬрди рди рд▓реЗрдВред рдереЛрдбрд╝рд╛-рдереЛрдбрд╝рд╛ рдкрд╛рдиреА рдкрд┐рдПрдВред' 
                }
            ],
            'tamil': [
                { 
                    name: 'роХро╛ропрпНроЪрпНроЪро▓рпН', 
                    severity: 'H', 
                    advice: 'роУропрпНро╡рпБ роОроЯрпБродрпНродрпБ роиро┐ро▒рпИроп роирпАро░рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН. роирпЖро▒рпНро▒ро┐ропро┐ро▓рпН роХрпБро│ро┐ро░рпНроирпНрод роТродрпНродроЯроорпН роХрпКроЯрпБроХрпНроХро╡рпБроорпНред' 
                },
                { 
                    name: 'роЗро░рпБрооро▓рпН', 
                    severity: 'H', 
                    advice: 'родрпЗройрпБроЯройрпН ро╡рпЖродрпБро╡рпЖродрпБрокрпНрокро╛рой роирпАро░рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН. роирпАро░ро╛ро╡ро┐ рокро┐роЯро┐роХрпНроХро╡рпБроорпНред' 
                },
                { 
                    name: 'родро▓рпИро╡ро▓ро┐', 
                    severity: 'H', 
                    advice: 'роЗро░рпБрогрпНроЯ роЕроорпИродро┐ропро╛рой роЕро▒рпИропро┐ро▓рпН роУропрпНро╡рпБ роОроЯрпБроХрпНроХро╡рпБроорпН. роХрпБро│ро┐ро░рпН роТродрпНродроЯроорпН роХрпКроЯрпБроХрпНроХро╡рпБроорпНред' 
                },
                { 
                    name: 'роирпЖроЮрпНроЪрпБ ро╡ро▓ро┐', 
                    severity: 'E', 
                    advice: 'роЕройрпИродрпНродрпБ роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИропрпБроорпН роиро┐ро▒рпБродрпНродро╡рпБроорпН. роЙроЯрпНроХро╛ро░рпНроирпНродрпБ роУропрпНро╡рпБ роОроЯрпБроХрпНроХро╡рпБроорпН.' 
                },
                { 
                    name: 'рокро╛роорпНрокрпБ роХроЯро┐родрпНродро▓рпН', 
                    severity: 'E', 
                    advice: 'роХро╛ропродрпНродрпИ ро╡рпЖроЯрпНроЯ ро╡рпЗрогрпНроЯро╛роорпН. роирпЛропро╛ро│ро┐ропрпИ роЕроорпИродро┐ропро╛роХ ро╡рпИроХрпНроХро╡рпБроорпН.' 
                },
                { 
                    name: 'ро╡ропро┐ро▒рпНро▒рпБро╡ро▓ро┐', 
                    severity: 'D', 
                    advice: 'роЪро┐ро▓ роорогро┐ роирпЗро░роорпН родро┐роЯ роЙрогро╡рпБ родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН. роХрпКроЮрпНроЪроорпН роХрпКроЮрпНроЪрооро╛роХ родрогрпНрогрпАро░рпН роХрпБроЯро┐роХрпНроХро╡рпБроорпН.' 
                }
            ]
        };

        const severityText = {
            'H': {
                'english': 'ЁЯПа Home Care',
                'hindi': 'ЁЯПа рдШрд░реЗрд▓реВ рджреЗрдЦрднрд╛рд▓', 
                'tamil': 'ЁЯПа ро╡рпАроЯрпНроЯро┐ро▓рпН рокро░ро╛рооро░ро┐рокрпНрокрпБ'
            },
            'D': {
                'english': 'ЁЯСитАНтЪХя╕П Doctor Visit',
                'hindi': 'ЁЯСитАНтЪХя╕П рдбреЙрдХреНрдЯрд░ рдХреЛ рджрд┐рдЦрд╛рдПрдБ',
                'tamil': 'ЁЯСитАНтЪХя╕П рооро░рпБродрпНродрпБро╡ро░рпИ роЕрогрпБроХро╡рпБроорпН'
            },
            'E': {
                'english': 'ЁЯЪи Emergency',
                'hindi': 'ЁЯЪи рдЖрдкрд╛рддрдХрд╛рд▓',
                'tamil': 'ЁЯЪи роЕро╡роЪро░роорпН'
            }
        };

        let html = '';
        sampleSymptoms[currentLanguage].forEach(symptom => {
            html += `
                <div class="symptom-item">
                    <div>
                        <strong>${symptom.name}</strong>
                        <br><small>${symptom.advice.substring(0, 100)}${symptom.advice.length > 100 ? '...' : ''}</small>
                    </div>
                    <div class="severity ${symptom.severity}">${severityText[symptom.severity][currentLanguage]}</div>
                </div>
            `;
        });

        const errorText = {
            'english': 'Backend not connected - showing sample data',
            'hindi': 'рдмреИрдХрдПрдВрдб рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реИ - рдирдореВрдирд╛ рдбреЗрдЯрд╛ рджрд┐рдЦрд╛ рд░рд╣реЗ рд╣реИрдВ',
            'tamil': 'рокро┐ройрпНродро│роорпН роЗрогрпИроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ - рооро╛родро┐ро░ро┐ родро░ро╡рпБ роХро╛роЯрпНроЯрокрпНрокроЯрпБроХро┐ро▒родрпБ'
        }[currentLanguage];

        document.getElementById('symptoms-list').innerHTML = html + 
            `<div class="error" style="margin-top: 20px;">${errorText}</div>`;
    }
}

        // Update statistics display
        function updateStatsDisplay() {
            document.getElementById('total-queries').textContent = usageStats.totalQueries;
            document.getElementById('voice-queries').textContent = usageStats.voiceQueries;
            document.getElementById('successful-matches').textContent = usageStats.successfulMatches;
        }

        // Update stats in main menu
        function updateStats() {
            const labels = {
                'english': {queries: 'Total Queries', voice: 'Voice Queries', matches: 'Successful Matches'},
                'hindi': {queries: 'рдХреБрд▓ рдкреНрд░рд╢реНрди', voice: 'рдЖрд╡рд╛рдЬрд╝ рдкреНрд░рд╢реНрди', matches: 'рд╕рдлрд▓ рдореИрдЪ'},
                'tamil': {queries: 'роорпКродрпНрод роХрпЗро│рпНро╡ро┐роХро│рпН', voice: 'роХрпБро░ро▓рпН роХрпЗро│рпНро╡ро┐роХро│рпН', matches: 'ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛рой рокрпКро░рпБродрпНродроЩрпНроХро│рпН'}
            };
            
            if (document.getElementById('queries-label')) {
                document.getElementById('queries-label').textContent = labels[currentLanguage].queries;
                document.getElementById('voice-label').textContent = labels[currentLanguage].voice;
                document.getElementById('matches-label').textContent = labels[currentLanguage].matches;
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initSpeechRecognition();
            
            if ('speechSynthesis' in window) {
                speechSynthesis.onvoiceschanged = function() {
                    // Voices loaded
                };
            }
            
            document.getElementById('symptom-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    processSymptom();
                }
            });
        });
       // Emergency Alert Function
function emergencyAlert() {
    const alertMessage = getText('emergency_alert');
    
    // Display emergency message in results div
    const resultsDiv = document.getElementById('results');
    if (resultsDiv) {
        resultsDiv.innerHTML = `
            <div style="background: #ffebee; border: 2px solid #f44336; border-radius: 15px; padding: 25px; margin: 10px 0; text-align: center; box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);">
                <h3 style="color: #c62828; margin-bottom: 15px; font-size: 24px;">ЁЯЪи EMERGENCY ALERT</h3>
                <p style="color: #d32f2f; font-size: 18px; font-weight: bold; line-height: 1.4;">${alertMessage}</p>
                <div style="margin-top: 20px; padding: 15px; background: #fff; border-radius: 10px; border-left: 5px solid #f44336;">
                    <p style="color: #666; font-size: 16px; margin: 0;">
                        ${currentLanguage === 'english' ? 'ЁЯУЮ Emergency helpline will be contacted automatically' : 
                          currentLanguage === 'hindi' ? 'ЁЯУЮ рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд╕рдВрдкрд░реНрдХ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛' :
                          'ЁЯУЮ роЕро╡роЪро░ ро╣рпЖро▓рпНрокрпНро▓рпИройрпН родро╛ройро╛роХро╡рпЗ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рокрпНрокроЯрпБроорпН'}
                    </p>
                </div>
            </div>
        `;
        resultsDiv.style.display = 'block';
        resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    
    // Text-to-Speech for emergency alert
    speakEmergencyAlert(alertMessage);
}

// Text-to-Speech for Emergency Alert
function speakEmergencyAlert(text) {
    if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        
        const langMapping = {
            'english': 'en-US',
            'hindi': 'hi-IN',
            'tamil': 'ta-IN'
        };
        
        utterance.lang = langMapping[currentLanguage] || 'en-US';
        utterance.rate = 0.8;
        utterance.pitch = 1.1;
        utterance.volume = 1.0;
        
        window.speechSynthesis.speak(utterance);
    }
}

// Update Emergency Button Labels
function updateEmergencyButtonLabel() {
    const emergencyButtons = document.querySelectorAll('#emergencyBtn, #emergencyBtnMain');
    emergencyButtons.forEach(button => {
        if (button) {
            button.innerHTML = getText('emergency_button');
        }
    });
} 

    </script>
</body>
</html>
