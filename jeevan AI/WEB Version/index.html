<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rural Healthcare AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            position: relative;
            overflow: hidden;
            min-height: 600px;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #4CAF50, #2196F3, #FF9800);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 300;
        }

        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 400;
        }

        .disclaimer {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
            background: #fff3cd;
            padding: 10px;
            border-radius: 10px;
            border-left: 4px solid #ff9800;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .language-selector {
            text-align: center;
            margin-bottom: 30px;
        }

        .lang-prompt {
            font-size: 18px;
            margin-bottom: 20px;
            color: #333;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            min-width: 150px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-btn {
            padding: 20px;
            font-size: 18px;
            border-radius: 15px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .input-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .input-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .text-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            min-width: 200px;
        }

        .text-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .voice-btn {
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            min-width: 120px;
        }

        .voice-status {
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-weight: 500;
        }

        .listening {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .processing {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .symptom-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

        .symptom-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .symptom-name {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }

        .confidence {
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .severity {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            margin: 10px 0;
        }

        .severity.H {
            background: #d4edda;
            color: #155724;
        }

        .severity.D {
            background: #fff3cd;
            color: #856404;
        }

        .severity.E {
            background: #f8d7da;
            color: #721c24;
        }

        .advice-section {
            margin: 15px 0;
            padding: 15px;
            background: #f1f3f4;
            border-radius: 10px;
        }

        .section-title {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptoms-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .symptom-item {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .back-btn {
            background: #6c757d !important;
            margin-bottom: 20px;
        }

        .usage-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .general-advice {
            background: #e8f5e9;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #4CAF50;
        }

        .advice-list {
            margin: 15px 0;
            padding-left: 20px;
        }

        .advice-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .input-controls {
                flex-direction: column;
            }
            
            .text-input {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Selection Screen -->
        <div id="language-screen" class="screen active">
            <div class="language-selector">
                <div class="lang-prompt">üåê Select language / ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç / ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç</div>
                <button class="btn" onclick="selectLanguage('english')">1. English</button>
                <button class="btn" onclick="selectLanguage('hindi')">2. ‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                <button class="btn" onclick="selectLanguage('tamil')">3. ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div id="main-screen" class="screen">
            <h1 id="main-title">üè• RURAL HEALTHCARE AI ASSISTANT üè•</h1>
            <div id="disclaimer" class="disclaimer">
                ‚ö†Ô∏è DISCLAIMER: Basic guidance only. Consult doctors for serious cases.
            </div>
            
            <div class="main-menu">
                <button class="btn menu-btn" onclick="showSymptomDiagnosis()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">ü©∫</div>
                        <div id="menu-diagnosis">Symptom Diagnosis</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showLanguageSelector()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">üåê</div>
                        <div id="menu-language">Change Language</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showAllSymptoms()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">üìä</div>
                        <div id="menu-symptoms">View All Symptoms</div>
                    </div>
                </button>
                
                <button class="btn menu-btn" onclick="showUsageStats()">
                    <div>
                        <div style="font-size: 24px; margin-bottom: 5px;">üìà</div>
                        <div id="menu-stats">Usage Statistics</div>
                    </div>
                </button>
              <div style="text-align: center; margin: 20px 0;">
    <button class="btn voice-btn" id="emergencyBtnMain" onclick="emergencyAlert()">üö® Emergency</button>
</div>
  

            </div>
        </div>
        
        <!-- Symptom Diagnosis Screen -->
        <div id="diagnosis-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn">‚Üê Back to Menu</button>
            <h2 id="diagnosis-title">ü©∫ Symptom Diagnosis</h2>
            
            <div class="input-section">
                <div id="input-prompt">ü©∫ Describe your symptom:</div>
                
                <div class="input-controls">
                    <input type="text" id="symptom-input" class="text-input" placeholder="Type your symptom here...">
                    <div class="voice-controls">
                        <button class="btn voice-btn" id="voice-btn" onclick="startVoiceInput()">üé§ Voice</button>
                        <button class="btn voice-btn" onclick="processSymptom()">üîç Analyze</button>
                    </div>
                </div>
                
                <div id="voice-status" class="voice-status" style="display: none;"></div>
            </div>
            
            <div id="results" class="results" style="display: none;"></div>
            <div class="voice-controls">
    <button class="btn" id="emergencyBtn" onclick="emergencyAlert()">üö® Emergency</button>
</div>


        </div>

        <!-- All Symptoms Screen -->
        <div id="symptoms-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn2">‚Üê Back to Menu</button>
            <h2 id="symptoms-title">üìä All Symptoms Database</h2>
            <div id="symptoms-list" class="symptoms-list">
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Loading symptoms...</div>
                </div>
            </div>
        </div>

        <!-- Usage Statistics Screen -->
        <div id="stats-screen" class="screen">
            <button class="btn back-btn" onclick="showMainMenu()" id="back-btn3">‚Üê Back to Menu</button>
            <h2 id="stats-title">üìà Usage Statistics</h2>
            <div id="usage-stats" class="usage-stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-queries">0</div>
                    <div class="stat-label" id="queries-label">Total Queries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="voice-queries">0</div>
                    <div class="stat-label" id="voice-label">Voice Queries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="successful-matches">0</div>
                    <div class="stat-label" id="matches-label">Successful Matches</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let currentLanguage = 'english';
        let isListening = false;
        let recognition = null;
        let usageStats = {
            totalQueries: 0,
            voiceQueries: 0,
            successfulMatches: 0
        };

        // Save stats to memory (since localStorage not supported)
        function saveStats() {
            // Stats will persist only during this session
        }

        // Translations
        const translations = {
            'welcome_title': {
                'english': "üè• RURAL HEALTHCARE AI ASSISTANT üè•",
                'hindi': "üè• ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§è‡§Ü‡§à ‡§∏‡§π‡§æ‡§Ø‡§ï üè•",
                'tamil': "üè• ‡Æï‡Æø‡Æ∞‡Ææ‡ÆÆ‡Æ™‡Øç‡Æ™‡ØÅ‡Æ± ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ AI ‡Æâ‡Æ§‡Æµ‡Æø‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç üè•"
            },
            'disclaimer': {
                'english': "‚ö†Ô∏è DISCLAIMER: Basic guidance only. Consult doctors for serious cases.",
                'hindi': "‚ö†Ô∏è ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡§∞‡§£: ‡§ï‡•á‡§µ‡§≤ ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®‡•§ ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§Æ‡§æ‡§Æ‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§",
                'tamil': "‚ö†Ô∏è ‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æö‡Øç‡Æö‡Ææ‡Æü‡Øç‡Æü‡ØÅ: ‡ÆÖ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øà ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡ØÅ‡Æ§‡Æ≤‡Øç‡Æ§‡Ææ‡Æ©‡Øç. ‡Æ®‡ØÅ‡Æ£‡ØÅ‡§ï‡Øç‡Æï‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Æ¥‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç."
            },
            'menu_diagnosis': {
                'english': "Symptom Diagnosis",
                'hindi': "‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§ø‡§¶‡§æ‡§®",
                'tamil': "‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø ‡Æ™‡Æ∞‡Æø‡Æö‡Øã‡Æ§‡Æ©‡Øà"
            },
            'menu_language': {
                'english': "Change Language",
                'hindi': "‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç",
                'tamil': "‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç"
            },
            'menu_symptoms': {
                'english': "View All Symptoms",
                'hindi': "‡§∏‡§≠‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç",
                'tamil': "‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡Æ£‡Øç‡Æï"
            },
            'menu_stats': {
                'english': "Usage Statistics",
                'hindi': "‡§â‡§™‡§Ø‡•ã‡§ó ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á",
                'tamil': "‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç"
            },
            'diagnosis_title': {
                'english': "ü©∫ Symptom Diagnosis",
                'hindi': "ü©∫ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§ø‡§¶‡§æ‡§®",
                'tamil': "ü©∫ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø ‡Æ™‡Æ∞‡Æø‡Æö‡Øã‡Æ§‡Æ©‡Øà"
            },
            'symptoms_title': {
                'english': "üìä All Symptoms Database",
                'hindi': "üìä ‡§∏‡§≠‡•Ä ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏",
                'tamil': "üìä ‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≥‡ÆÆ‡Øç"
            },
            'stats_title': {
                'english': "üìà Usage Statistics",
                'hindi': "üìà ‡§â‡§™‡§Ø‡•ã‡§ó ‡§Ü‡§Ç‡§ï‡§°‡§º‡•á",
                'tamil': "üìà ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡Æ™‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æø‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç"
            },
            'back_menu': {
                'english': "‚Üê Back to Menu",
                'hindi': "‚Üê ‡§Æ‡•á‡§®‡•Ç ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏",
                'tamil': "‚Üê ‡ÆÆ‡ØÜ‡Æ©‡ØÅ‡Æµ‡Æø‡Æ±‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ"
            },
            'describe_symptom': {
                'english': "ü©∫ Describe your symptom:",
                'hindi': "ü©∫ ‡§Ö‡§™‡§®‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç:",
                'tamil': "ü©∫ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡ÆØ‡Øà ‡Æµ‡Æø‡Æµ‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:"
            },
            'voice_input': {
                'english': "üé§ Voice",
                'hindi': "üé§ ‡§Ü‡§µ‡§æ‡§ú‡§º",
                'tamil': "üé§ ‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øç"
            },
            'analyze': {
                'english': "üîç Analyze",
                'hindi': "üîç ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£",
                'tamil': "üîç ‡Æ™‡Æï‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ"
            },
            'listening': {
                'english': "üé§ Listening... Speak now",
                'hindi': "üé§ ‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç... ‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç",
                'tamil': "üé§ ‡Æï‡Øá‡Æü‡Øç‡Æü‡ØÅ‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ... ‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ™‡Øá‡Æö‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç"
            },
            'processing': {
                'english': "‚è≥ Processing your input...",
                'hindi': "‚è≥ ‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§ï‡•ã ‡§∏‡§Æ‡§ù ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
                'tamil': "‚è≥ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÄ‡Æü‡Øç‡Æü‡Øà ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Ææ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ..."
            },
            'no_match': {
                'english': "I couldn't find an exact match for your symptom. Here are some general healthcare tips:",
                'hindi': "‡§Æ‡•Å‡§ù‡•á ‡§Ü‡§™‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ ‡§∏‡§ü‡•Ä‡§ï ‡§Æ‡•á‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§Ø‡§π‡§æ‡§Ç ‡§ï‡•Å‡§õ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§Ø‡•Å‡§ï‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡§Ç:",
                'tamil': "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡Æ§‡Øç‡Æ§‡Øà ‡Æé‡Æ©‡Øç‡Æ©‡Ææ‡Æ≤‡Øç ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø‡Æï‡Øç‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡Æá‡Æô‡Øç‡Æï‡ØÅ ‡Æö‡Æø‡Æ≤ ‡Æ™‡Øä‡Æ§‡ØÅ ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ©:"
            },
            'voice_error': {
                'english': "Voice not recognized. Please try again or use text input.",
                'hindi': "‡§Ü‡§µ‡§æ‡§ú‡§º ‡§™‡§π‡§ö‡§æ‡§®‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§ó‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§",
                'tamil': "‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øç ‡ÆÖ‡Æ±‡Æø‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æâ‡Æ∞‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡ØÄ‡Æü‡Øç‡Æü‡Øà‡Æ™‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç."
            },
            'symptom_label': {
                'english': "üìã Symptom",
                'hindi': "üìã ‡§≤‡§ï‡•ç‡§∑‡§£",
                'tamil': "üìã ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø"
            },
            'confidence_label': {
                'english': "üéØ Confidence",
                'hindi': "üéØ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏",
                'tamil': "üéØ ‡Æ®‡ÆÆ‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Øà"
            },
            'severity_label': {
                'english': "‚ö†Ô∏è Severity",
                'hindi': "‚ö†Ô∏è ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ",
                'tamil': "‚ö†Ô∏è ‡Æ§‡ØÄ‡Æµ‡Æø‡Æ∞‡ÆÆ‡Øç"
            },
            'advice_label': {
                'english': "üí° Advice",
                'hindi': "üí° ‡§∏‡§≤‡§æ‡§π",
                'tamil': "üí° ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà"
            },
            'first_aid_label': {
                'english': "ü©π First Aid",
                'hindi': "ü©π ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§â‡§™‡§ö‡§æ‡§∞",
                'tamil': "ü©π ‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø"
            },
            'emergency_button' : {
    'english': "üö® Emergency",
    'hindi': "üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§®",
    'tamil': "üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç"
},

'emergency_alert' : {
    'english': "Emergency alert sent! Please wait for the ambulance and follow first aid instructions.",
    'hindi': "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§≠‡•á‡§ú‡•Ä ‡§ó‡§à! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏ ‡§ï‡§æ ‡§á‡§Ç‡§§‡§ú‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞‡•á‡§Ç‡•§",
    'tamil': "‡ÆÖ‡Æµ‡Æö‡Æ∞‡Æö‡Øç ‡Æö‡Æø‡Æï‡Øç‡Æ©‡Æ≤‡Øç ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ! ‡ÆÖ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æ≤‡Æ©‡Øç‡Æ∏‡Øç ‡Æµ‡Æ∞‡ØÅ‡Æµ‡Æ§‡Øà‡Æï‡Øç ‡Æï‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡ØÅ‡Æ§‡Æµ‡Æø ‡Æµ‡Æ¥‡Æø‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡Øà ‡Æ™‡Æø‡Æ©‡Øç‡Æ™‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç."
},
'general_health_tips': {
    'english': [
        "üíß Stay hydrated by drinking plenty of water throughout the day",
        "ü•ó Eat a balanced diet with fruits and vegetables",
        "üò¥ Get 7-8 hours of quality sleep each night",
        "üßò Practice stress-reduction techniques like deep breathing",
        "üö∂ Stay active with regular light exercise",
        "üßº Wash hands frequently to prevent infections",
        "üåû Get some sunlight exposure for vitamin D",
        "üö≠ Avoid smoking and limit alcohol consumption"
    ],
    'hindi': [
        "üíß ‡§¶‡§ø‡§® ‡§≠‡§∞ ‡§Æ‡•á‡§Ç ‡§ñ‡•Ç‡§¨ ‡§™‡§æ‡§®‡•Ä ‡§™‡•Ä‡§ï‡§∞ ‡§π‡§æ‡§á‡§°‡•ç‡§∞‡•á‡§ü‡•á‡§° ‡§∞‡§π‡•á‡§Ç",
        "ü•ó ‡§´‡§≤‡•ã‡§Ç ‡§î‡§∞ ‡§∏‡§¨‡•ç‡§ú‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Ç‡§§‡•Å‡§≤‡§ø‡§§ ‡§Ü‡§π‡§æ‡§∞ ‡§≤‡•á‡§Ç",
        "üò¥ ‡§π‡§∞ ‡§∞‡§æ‡§§ 7-8 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡•Ä‡§Ç‡§¶ ‡§≤‡•á‡§Ç",
        "üß¥ ‡§ó‡§π‡§∞‡•Ä ‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§®‡•á ‡§ú‡•à‡§∏‡•Ä ‡§§‡§®‡§æ‡§µ ‡§ï‡§Æ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§§‡§ï‡§®‡•Ä‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç",
        "üö∂ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§π‡§≤‡•ç‡§ï‡•á ‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ ‡§∏‡•á ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§∞‡§π‡•á‡§Ç",
        "üßº ‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§π‡§æ‡§• ‡§ß‡•ã‡§è‡§Ç",
        "üåû ‡§µ‡§ø‡§ü‡§æ‡§Æ‡§ø‡§® ‡§°‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•Å‡§õ ‡§ß‡•Ç‡§™ ‡§≤‡•á‡§Ç",
        "üö≠ ‡§ß‡•Ç‡§Æ‡•ç‡§∞‡§™‡§æ‡§® ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§∂‡§∞‡§æ‡§¨ ‡§ï‡§æ ‡§∏‡•á‡§µ‡§® ‡§∏‡•Ä‡§Æ‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç"
    ],
    'tamil': [
        "üíß ‡Æ®‡Ææ‡Æ≥‡Øç ‡ÆÆ‡ØÅ‡Æ¥‡ØÅ‡Æµ‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ±‡Øà‡ÆØ ‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æ§‡Øç‡Æ§‡ØÅ ‡Æ®‡ØÄ‡Æ∞‡Øá‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "ü•ó ‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æï‡Ææ‡ÆØ‡Øç‡Æï‡Æ±‡Æø‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æö‡ÆÆ‡Æö‡Øç‡Æö‡ØÄ‡Æ∞‡Øç ‡Æâ‡Æ£‡Æµ‡Øà ‡Æâ‡Æ£‡Øç‡Æ£‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üò¥ ‡Æí‡Æµ‡Øç‡Æµ‡Øä‡Æ∞‡ØÅ ‡Æá‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç 7-8 ‡ÆÆ‡Æ£‡Æø ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç ‡Æ§‡Æ∞‡ÆÆ‡Ææ‡Æ© ‡Æ§‡ØÇ‡Æï‡Øç‡Æï‡ÆÆ‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üß¥ ‡ÆÜ‡Æ¥‡Øç‡ÆÆ‡ØÇ‡Æö‡Øç‡Æö‡ØÅ ‡Æ™‡Øã‡Æ©‡Øç‡Æ± ‡ÆÆ‡Æ© ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡Æï‡Øç ‡Æï‡ØÅ‡Æ±‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡ØÅ‡Æü‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üö∂ ‡Æµ‡Æ¥‡Æï‡Øç‡Æï‡ÆÆ‡Ææ‡Æ© ‡Æá‡Æ≤‡Æï‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æâ‡Æü‡Æ±‡Øç‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø‡ÆØ‡ØÅ‡Æü‡Æ©‡Øç ‡Æö‡ØÅ‡Æ±‡ØÅ‡Æö‡ØÅ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üßº ‡Æ§‡Øä‡Æ±‡Øç‡Æ±‡ØÅ‡Æ®‡Øã‡ÆØ‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Æü‡ØÅ‡Æï‡Øç‡Æï ‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æü‡Æø ‡Æï‡Øà‡Æï‡Æ≥‡Øà ‡Æï‡Æ¥‡ØÅ‡Æµ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üåû ‡Æµ‡Øà‡Æü‡Øç‡Æü‡ÆÆ‡Æø‡Æ©‡Øç ‡Æü‡Æø-‡Æï‡Øç‡Æï‡ØÅ ‡Æö‡Æø‡Æ±‡Æø‡Æ§‡ØÅ ‡Æö‡ØÇ‡Æ∞‡Æø‡ÆØ ‡Æí‡Æ≥‡Æø ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "üö≠ ‡Æ™‡ØÅ‡Æï‡Øà‡Æ™‡Øç‡Æ™‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡ØÅ ‡ÆÆ‡Æ§‡ØÅ ‡ÆÖ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ‡Æµ‡Æ§‡Øà ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç"
    ]
}

        };

        // Get translated text
        function getText(key) {
            return translations[key] && translations[key][currentLanguage] || key;
        }

        // Update UI language
        function updateLanguage() {
            document.getElementById('main-title').textContent = getText('welcome_title');
            document.getElementById('disclaimer').textContent = getText('disclaimer');
            document.getElementById('menu-diagnosis').textContent = getText('menu_diagnosis');
            document.getElementById('menu-language').textContent = getText('menu_language');
            document.getElementById('menu-symptoms').textContent = getText('menu_symptoms');
            document.getElementById('menu-stats').textContent = getText('menu_stats');
            document.getElementById('diagnosis-title').textContent = getText('diagnosis_title');
            document.getElementById('symptoms-title').textContent = getText('symptoms_title');
            document.getElementById('stats-title').textContent = getText('stats_title');
            document.getElementById('back-btn').textContent = getText('back_menu');
            document.getElementById('back-btn2').textContent = getText('back_menu');
            document.getElementById('back-btn3').textContent = getText('back_menu');
            document.getElementById('input-prompt').textContent = getText('describe_symptom');
            document.getElementById('voice-btn').innerHTML = getText('voice_input');
            
            // Update placeholder text
            document.getElementById('symptom-input').placeholder = 
                currentLanguage === 'english' ? 'Type your symptom here...' :
                currentLanguage === 'hindi' ? '‡§Ö‡§™‡§®‡§æ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Ø‡§π‡§æ‡§Å ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç...' :
                '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡ÆØ‡Øà ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ§‡Æü‡Øç‡Æü‡Æö‡Øç‡Æö‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï...';
                updateEmergencyButtonLabel();
        }

        // Enhanced speech recognition with better language support
        
        // Enhanced speech recognition with better language support

function initSpeechRecognition() {
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.continuous = false;
        recognition.interimResults = true;
        recognition.maxAlternatives = 5;
        
        // Set language based on current selection
        const langMapping = {
            'english': 'en-IN',
            'hindi': 'hi-IN',
            'tamil': 'ta-IN'
        };
        recognition.lang = langMapping[currentLanguage];
        
        recognition.onstart = function() {
            isListening = true;
            showVoiceStatus(getText('listening'), 'listening');
            document.getElementById('voice-btn').innerHTML = 'üõë ' + (currentLanguage === 'english' ? 'Stop' : currentLanguage === 'hindi' ? '‡§∞‡•ã‡§ï‡•á‡§Ç' : '‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ');
        };
        
        recognition.onresult = function(event) {
            let finalTranscript = '';
            let interimTranscript = '';
            
            for (let i = event.resultIndex; i < event.results.length; i++) {
                const transcript = event.results[i][0].transcript;
                if (event.results[i].isFinal) {
                    finalTranscript += transcript;
                } else {
                    interimTranscript += transcript;
                }
            }
            
            if (finalTranscript) {
                document.getElementById('symptom-input').value = finalTranscript.trim();
                
                const confidenceText = {
                    'english': `Voice recognized: "${finalTranscript.trim()}"`,
                    'hindi': `‡§Ü‡§µ‡§æ‡§ú‡§º ‡§™‡§π‡§ö‡§æ‡§®‡•Ä ‡§ó‡§à: "${finalTranscript.trim()}"`,
                    'tamil': `‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øç ‡ÆÖ‡Æô‡Øç‡Æï‡ØÄ‡Æï‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ: "${finalTranscript.trim()}"`
                }[currentLanguage];
                
                showVoiceStatus(confidenceText, 'listening');
                
                usageStats.voiceQueries++;
                saveStats();
                
                setTimeout(() => {
                    hideVoiceStatus();
                    processSymptom();
                }, 1500);
            } else if (interimTranscript) {
                document.getElementById('symptom-input').value = interimTranscript.trim();
            }
        };
        
        recognition.onerror = function(event) {
            console.log('Speech recognition error:', event.error);
            let errorMessage = getText('voice_error');
            showVoiceStatus(errorMessage, 'error');
            setTimeout(hideVoiceStatus, 4000);
        };
        
        recognition.onend = function() {
            isListening = false;
            document.getElementById('voice-btn').innerHTML = getText('voice_input');
        };
    }
}
// Function to clear diagnosis screen
function clearDiagnosisScreen() {
    document.getElementById('symptom-input').value = '';
    document.getElementById('results').style.display = 'none';
    document.getElementById('results').innerHTML = '';
    hideVoiceStatus();
}

        // Language selection with voice recognition initialization
       function selectLanguage(lang) {
    currentLanguage = lang;
    updateLanguage();
    
    // Clear any existing diagnosis data
    clearDiagnosisScreen();
    
    showMainMenu();
    
    // Reinitialize speech recognition with new language
    initSpeechRecognition();
    
    // Welcome message in selected language
    const welcomeMessage = getText('welcome_title').replace(/[üè•]/g, '');
    speakText(welcomeMessage);
}
        // Enhanced text-to-speech
        function speakText(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                const langMapping = {
                    'english': 'en-IN',
                    'hindi': 'hi-IN', 
                    'tamil': 'ta-IN'
                };
                
                utterance.lang = langMapping[currentLanguage] || 'en-IN';
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 0.8;
                
                const voices = speechSynthesis.getVoices();
                const preferredVoice = voices.find(voice => 
                    voice.lang.startsWith(utterance.lang.split('-')[0])
                );
                
                if (preferredVoice) {
                    utterance.voice = preferredVoice;
                }
                
                speechSynthesis.speak(utterance);
            }
        }

        // Show/hide screens
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function showLanguageSelector() {
    // Clear diagnosis data when going to language selector
    clearDiagnosisScreen();
    
    showScreen('language-screen');
}
        function showMainMenu() {
            showScreen('main-screen');
            updateStats();
        }

        function showSymptomDiagnosis() {
    // Clear previous results when entering diagnosis screen
    clearDiagnosisScreen();
    
    showScreen('diagnosis-screen');
    document.getElementById('symptom-input').focus();
}

        function showAllSymptoms() {
            showScreen('symptoms-screen');
            loadAllSymptoms();
        }

        function showUsageStats() {
            showScreen('stats-screen');
            updateStatsDisplay();
        }

        // Enhanced voice input
        // Enhanced voice input with better language detection
function startVoiceInput() {
    if (!recognition) {
        const alertText = {
            'english': 'Speech recognition not supported. Please use Chrome browser.',
            'hindi': '‡§µ‡•â‡§á‡§∏ ‡§™‡§π‡§ö‡§æ‡§® ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡•ç‡§∞‡•ã‡§Æ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§',
            'tamil': '‡Æ™‡Øá‡Æö‡Øç‡Æö‡ØÅ ‡ÆÖ‡Æô‡Øç‡Æï‡ØÄ‡Æï‡Ææ‡Æ∞‡ÆÆ‡Øç ‡ÆÜ‡Æ§‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà. ‡Æï‡Æø‡Æ∞‡Øã‡ÆÆ‡Øç ‡Æâ‡Æ≤‡Ææ‡Æµ‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç.'
        }[currentLanguage];
        alert(alertText);
        return;
    }
    
    if (isListening) {
        recognition.stop();
        return;
    }
    
    // Update language before starting
    const langMapping = {
        'english': 'en-IN',
        'hindi': 'hi-IN',
        'tamil': 'ta-IN'
    };
    recognition.lang = langMapping[currentLanguage];
    
    try {
        recognition.start();
    } catch (error) {
        console.error('Voice recognition start error:', error);
        showVoiceStatus('Could not start voice recognition. Try again.', 'error');
        setTimeout(hideVoiceStatus, 3000);
    }
}
        // Show voice status
        function showVoiceStatus(message, className) {
            const statusDiv = document.getElementById('voice-status');
            statusDiv.textContent = message;
            statusDiv.className = 'voice-status ' + className;
            statusDiv.style.display = 'block';
        }

        function hideVoiceStatus() {
            document.getElementById('voice-status').style.display = 'none';
        }

        // Process symptom input
        function processSymptom() {
            const symptomInput = document.getElementById('symptom-input').value.trim();
            if (!symptomInput) {
                alert('Please enter a symptom or use voice input');
                return;
            }

            usageStats.totalQueries++;
            saveStats();

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>${getText('processing')}</div>
                </div>
            `;
            resultsDiv.style.display = 'block';

            fetch(`http://localhost:5000/diagnose`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    symptom: symptomInput,
                    language: currentLanguage
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success && data.result) {
                    displayResult(data.result);
                    usageStats.successfulMatches++;
                } else {
                    displayGeneralHealthTips();
                }
                saveStats();
            })
            .catch(error => {
                console.log('Backend not available, using simulation');
                simulateDiagnosis(symptomInput);
            });
        }

        // Enhanced simulation with better language support
       // Enhanced simulation with better symptom matching
function simulateDiagnosis(symptomInput) {
    const symptoms = {
        'fever': {
            name: { english: "Fever", hindi: "‡§¨‡•Å‡§ñ‡§æ‡§∞", tamil: "‡Æï‡Ææ‡ÆØ‡Øç‡Æö‡Øç‡Æö‡Æ≤‡Øç" },
            severity: "H", confidence: 92,
            advice: {
                english: "Rest, drink plenty of fluids, and take paracetamol as directed. Monitor temperature regularly.",
                hindi: "‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç, ‡§ñ‡•Ç‡§¨ ‡§∏‡§æ‡§∞‡•á ‡§§‡§∞‡§≤ ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§™‡§ø‡§è‡§Ç ‡§î‡§∞ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§™‡•á‡§∞‡§æ‡§∏‡§ø‡§ü‡§æ‡§Æ‡•ã‡§≤ ‡§≤‡•á‡§Ç‡•§ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ‡§ï‡•Ä ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡§∞‡•á‡§Ç‡•§",
                tamil: "‡Æì‡ÆØ‡Øç‡Æµ‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ®‡Æø‡Æ±‡Øà‡ÆØ ‡Æ§‡Æø‡Æ∞‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ™‡Æü‡Æø ‡Æ™‡Ææ‡Æ∞‡Ææ‡Æö‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Ææ‡Æ≤‡Øç ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç‡•§ ‡Æµ‡ØÜ‡Æ™‡Øç‡Æ™‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ§‡Æµ‡Æ±‡Ææ‡ÆÆ‡Æ≤‡Øç ‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç."
            },
            first_aid: {
                english: "Apply cool compresses to forehead, take a lukewarm bath, and stay hydrated.",
                hindi: "‡§Æ‡§æ‡§•‡•á ‡§™‡§∞ ‡§†‡§Ç‡§°‡•Ä ‡§∏‡§ø‡§ï‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç, ‡§ó‡•Å‡§®‡§ó‡•Å‡§®‡•á ‡§™‡§æ‡§®‡•Ä ‡§∏‡•á ‡§∏‡•ç‡§®‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§π‡§æ‡§á‡§°‡•ç‡§∞‡•á‡§ü‡•á‡§° ‡§∞‡§π‡•á‡§Ç‡•§",
                tamil: "‡Æ®‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æï‡ØÅ‡Æ≥‡Æø‡Æ∞‡Øç‡Æ®‡Øç‡Æ§ ‡Æ§‡ØÅ‡Æ£‡Æø‡Æï‡Æ≥‡Øà ‡Æµ‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æá‡Æ≥‡ÆÆ‡Øç ‡Æµ‡ØÜ‡Æ®‡Øç‡Æ®‡ØÄ‡Æ∞‡Æø‡Æ≤‡Øç ‡Æï‡ØÅ‡Æ≥‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ®‡ØÄ‡Æ∞‡Øá‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Æ§‡Øà ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç."
            }
        },
        'cough': {
            name: { english: "Cough", hindi: "‡§ñ‡§æ‡§Ç‡§∏‡•Ä", tamil: "‡Æá‡Æ∞‡ØÅ‡ÆÆ‡Æ≤‡Øç" },
            severity: "H", confidence: 85,
            advice: {
                english: "Stay hydrated, use cough drops, avoid irritants like smoke, and consider steam inhalation.",
                hindi: "‡§π‡§æ‡§á‡§°‡•ç‡§∞‡•á‡§ü‡•á‡§° ‡§∞‡§π‡•á‡§Ç, ‡§ñ‡§æ‡§Ç‡§∏‡•Ä ‡§ï‡•Ä ‡§ó‡•ã‡§≤‡§ø‡§Ø‡§æ‡§Å ‡§≤‡•á‡§Ç, ‡§ß‡•Å‡§è‡§Ç ‡§ú‡•à‡§∏‡•á ‡§â‡§§‡•ç‡§§‡•á‡§ú‡§ï ‡§™‡§¶‡§æ‡§∞‡•ç‡§•‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§≠‡§æ‡§™ ‡§≤‡•á‡§®‡•á ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç‡•§",
                tamil: "‡Æ®‡ØÄ‡Æ∞‡Øá‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æµ‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æá‡Æ∞‡ØÅ‡ÆÆ‡Æ≤‡Øç ‡ÆÆ‡Ææ‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡Øà‡Æï‡Æ≥‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ™‡ØÅ‡Æï‡Øà ‡Æ™‡Øã‡Æ©‡Øç‡Æ± ‡Æé‡Æ∞‡Æø‡Æö‡Øç‡Æö‡Æ≤‡ØÇ‡Æü‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æü‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ®‡ØÄ‡Æ∞‡Ææ‡Æµ‡Æø ‡Æö‡ØÅ‡Æµ‡Ææ‡Æö‡Æø‡Æ™‡Øç‡Æ™‡Æ§‡Øà‡Æï‡Øç ‡Æï‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡Æµ‡ØÅ‡ÆÆ‡Øç."
            },
            first_aid: {
                english: "Gargle with warm salt water, drink honey and lemon tea, and use a humidifier.",
                hindi: "‡§ó‡§∞‡•ç‡§Æ ‡§®‡§Æ‡§ï ‡§ï‡•á ‡§™‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ó‡§∞‡§æ‡§∞‡•á ‡§ï‡§∞‡•á‡§Ç, ‡§∂‡§π‡§¶ ‡§î‡§∞ ‡§®‡•Ä‡§Ç‡§¨‡•Ç ‡§ï‡•Ä ‡§ö‡§æ‡§Ø ‡§™‡§ø‡§è‡§Ç ‡§î‡§∞ ‡§π‡•ç‡§Ø‡•Ç‡§Æ‡§ø‡§°‡§ø‡§´‡§æ‡§Ø‡§∞ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§",
                tamil: "‡Æö‡ØÇ‡Æü‡Ææ‡Æ© ‡Æâ‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡ØÄ‡Æ∞‡Ææ‡Æ≤‡Øç ‡Æï‡Øä‡Æ™‡Øç‡Æ™‡Æ≥‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ§‡Øá‡Æ©‡ØÅ‡ÆÆ‡Øç ‡Æé‡Æ≤‡ØÅ‡ÆÆ‡Æø‡Æö‡Øç‡Æö‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æ≤‡Æ®‡Øç‡Æ§ ‡Æ§‡Øá‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æà‡Æ∞‡Æ™‡Øç‡Æ™‡Æ§‡ÆÆ‡ØÇ‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç."
            }
        },
        'headache': {
            name: { english: "Headache", hindi: "‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶", tamil: "‡Æ§‡Æ≤‡Øà‡Æµ‡Æ≤‡Æø" },
            severity: "H", confidence: 88,
            advice: {
                english: "Rest in a quiet, dark room. Apply cold compress and take pain relievers if needed.",
                hindi: "‡§∂‡§æ‡§Ç‡§§, ‡§Ö‡§Ç‡§ß‡•á‡§∞‡•á ‡§ï‡§Æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§†‡§Ç‡§°‡•Ä ‡§∏‡§ø‡§ï‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ø‡§¶‡§ø ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•ã ‡§§‡•ã ‡§¶‡§∞‡•ç‡§¶ ‡§®‡§ø‡§µ‡§æ‡§∞‡§ï ‡§≤‡•á‡§Ç‡•§",
                tamil: "‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Æø‡ÆØ‡Ææ‡Æ©, ‡Æá‡Æ∞‡ØÅ‡Æ£‡Øç‡Æü ‡ÆÖ‡Æ±‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æì‡ÆØ‡Øç‡Æµ‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æï‡ØÅ‡Æ≥‡Æø‡Æ∞‡Øç‡Æ®‡Øç‡Æ§ ‡Æí‡Æ§‡Øç‡Æ§‡Æü‡ÆÆ‡Øç ‡Æï‡Øä‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡Æ§‡Øá‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Ææ‡Æ≤‡Øç ‡Æµ‡Æ≤‡Æø ‡Æ®‡Æø‡Æµ‡Ææ‡Æ∞‡Æ£‡Æø‡Æï‡Æ≥‡Øç ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç."
            },
            first_aid: {
                english: "Drink water, avoid bright lights, and massage temples gently.",
                hindi: "‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§è‡§Ç, ‡§§‡•á‡§ú ‡§∞‡•ã‡§∂‡§®‡•Ä ‡§∏‡•á ‡§¨‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§ï‡§®‡§™‡§ü‡•Ä ‡§ï‡•Ä ‡§ß‡•Ä‡§∞‡•á ‡§∏‡•á ‡§Æ‡§æ‡§≤‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§",
                tamil: "‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æ™‡Æø‡Æ∞‡Æï‡Ææ‡Æö‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Æø‡Æ≥‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æï‡Æ©‡Øç‡Æ©‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡ØÜ‡Æ§‡ØÅ‡Æµ‡Ææ‡Æï ‡ÆÆ‡Æö‡Ææ‡Æú‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç."
            }
        }
    };
    
    // Enhanced matching - normalize input and check multiple variations
    const input = symptomInput.toLowerCase().trim();
    let matchedSymptom = null;
    
    // Create comprehensive matching patterns
    const feverPatterns = ['fever', 'fevar', 'fiver', 'temperature', 'temp', 'hot', '‡§¨‡•Å‡§ñ‡§æ‡§∞', '‡§§‡§æ‡§™‡§Æ‡§æ‡§®', '‡§ó‡§∞‡•ç‡§Æ‡•Ä', '‡§ï‡§æ‡§Ø‡•ç‡§ö‡§≤', '‡Æï‡Ææ‡ÆØ‡Øç‡Æö‡Øç‡Æö‡Æ≤‡Øç', '‡Æµ‡ØÜ‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç', '‡Æö‡ØÇ‡Æü‡ØÅ'];
    const coughPatterns = ['cough', 'cof', 'kof', 'throat', 'cold', '‡§ñ‡§æ‡§Ç‡§∏‡•Ä', '‡§ó‡§≤‡§æ', '‡§∏‡§∞‡•ç‡§¶‡•Ä', '‡§á‡§∞‡•Å‡§Æ‡§≤', '‡Æá‡Æ∞‡ØÅ‡ÆÆ‡Æ≤‡Øç', '‡Æ§‡Øä‡Æ£‡Øç‡Æü‡Øà', '‡Æö‡Æ≥‡Æø'];
    const headachePatterns = ['headache', 'head', 'ache', 'migraine', '‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶', '‡§∏‡§ø‡§∞', '‡§Æ‡§æ‡§á‡§ó‡•ç‡§∞‡•á‡§®', '‡§§‡§≤‡•à‡§µ‡§≤‡•Ä', '‡Æ§‡Æ≤‡Øà‡Æµ‡Æ≤‡Æø', '‡Æ§‡Æ≤‡Øà', '‡ÆÆ‡Øà‡Æï‡Øç‡Æ∞‡Øá‡Æ©‡Øç'];
    
    // Check each pattern
    if (feverPatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.fever;
    } else if (coughPatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.cough;
    } else if (headachePatterns.some(pattern => input.includes(pattern))) {
        matchedSymptom = symptoms.headache;
    }
    
    if (matchedSymptom) {
        displayResult(matchedSymptom);
        usageStats.successfulMatches++;
        saveStats();
    } else {
        displayGeneralHealthTips();
    }
}

        // Display symptom result with enhanced language support
        function displayResult(data) {
    const resultsDiv = document.getElementById('results');
    
    const severityClass = data.severity;
    const severityText = {
        'H': {'english': 'üè† HOME CARE', 'hindi': 'üè† ‡§ò‡§∞‡•á‡§≤‡•Ç ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤', 'tamil': 'üè† ‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡Æø‡Æ≤‡Øç ‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ'},
        'D': {'english': 'üë®‚Äç‚öïÔ∏è DOCTOR VISIT', 'hindi': 'üë®‚Äç‚öïÔ∏è ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å', 'tamil': 'üë®‚Äç‚öïÔ∏è ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç'},
        'E': {'english': 'üö® EMERGENCY', 'hindi': 'üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤', 'tamil': 'üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç'}
    }[data.severity][currentLanguage];

    const symptomName = data.name && data.name[currentLanguage] ? data.name[currentLanguage] : data.name;
    const advice = data.advice && data.advice[currentLanguage] ? data.advice[currentLanguage] : data.advice;
    const firstAid = data.first_aid && data.first_aid[currentLanguage] ? data.first_aid[currentLanguage] : data.first_aid;

    resultsDiv.innerHTML = `
        <div class="symptom-card">
            <div class="symptom-header">
                <div class="symptom-name">${symptomName}</div>
                <div class="confidence">${data.confidence}% ${getText('confidence_label')}</div>
            </div>
            
            <div class="severity ${severityClass}">
                ${getText('severity_label')}: ${severityText}
            </div>
            
            <div class="advice-section">
                <div class="section-title">${getText('advice_label')}</div>
                <div>${advice}</div>
            </div>
            
            <div class="advice-section">
                <div class="section-title">${getText('first_aid_label')}</div>
                <div>${firstAid}</div>
            </div>
        </div>
    `;
    
    resultsDiv.style.display = 'block';
    
    // Speak out the result in user's language
    const resultText = `${symptomName}. ${severityText}. ${advice}. ${firstAid}`;
    speakText(resultText);
}

        // Display general health tips when no specific match is found
        function displayGeneralHealthTips() {
            const resultsDiv = document.getElementById('results');
            
            // Get 4 random health tips
            const allTips = getText('general_health_tips');
            const randomTips = [...allTips].sort(() => 0.5 - Math.random()).slice(0, 4);
            
            resultsDiv.innerHTML = `
                <div class="general-advice">
                    <h3>${getText('no_match')}</h3>
                    <ul class="advice-list">
                        ${randomTips.map(tip => `<li>${tip}</li>`).join('')}
                    </ul>
                    <p style="margin-top: 15px; font-style: italic;">
                        ${currentLanguage === 'english' ? 'If symptoms persist or worsen, please consult a healthcare professional.' : 
                          currentLanguage === 'hindi' ? '‡§Ø‡§¶‡§ø ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¨‡§®‡•á ‡§∞‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§Ø‡§æ ‡§¨‡§ø‡§ó‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§™‡•á‡§∂‡•á‡§µ‡§∞ ‡§∏‡•á ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç‡•§' :
                          '‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÅ ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÆ‡Øã‡Æö‡ÆÆ‡Æü‡Øà‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç, ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æí‡Æ∞‡ØÅ ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æ®‡Æø‡Æ™‡ØÅ‡Æ£‡Æ∞‡Øà‡Æï‡Øç ‡Æï‡Æ≤‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øã‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.'}
                    </p>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            
            // Speak the health tips
            const tipsText = getText('no_match') + '. ' + randomTips.join('. ');
            speakText(tipsText);
        }

        // Load all symptoms with proper language support
        async function loadAllSymptoms() {
    try {
        const response = await fetch(`http://localhost:5000/symptoms?lang=${currentLanguage}`);
        const data = await response.json();

        const symptomsList = document.getElementById('symptoms-list');
        let html = '';

        if (data.success && data.symptoms && data.symptoms.length > 0) {
            data.symptoms.forEach(symptom => {
                let symptomName, advice;
                
                // Extract symptom name based on current language
                if (typeof symptom === 'object') {
                    if (symptom.name && typeof symptom.name === 'object') {
                        symptomName = symptom.name[currentLanguage] || symptom.name.english || symptom.name;
                    } else {
                        symptomName = symptom.name || symptom;
                    }
                    
                    // Extract advice based on current language
                    if (symptom.advice && typeof symptom.advice === 'object') {
                        advice = symptom.advice[currentLanguage] || symptom.advice.english || '';
                    } else {
                        advice = symptom.advice || '';
                    }
                } else {
                    symptomName = symptom;
                    advice = '';
                }

                const severity = symptom.severity || 'H';
                const severityText = {
                    'H': {
                        'english': 'üè† Home Care',
                        'hindi': 'üè† ‡§ò‡§∞‡•á‡§≤‡•Ç ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤', 
                        'tamil': 'üè† ‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡Æø‡Æ≤‡Øç ‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ'
                    },
                    'D': {
                        'english': 'üë®‚Äç‚öïÔ∏è Doctor Visit',
                        'hindi': 'üë®‚Äç‚öïÔ∏è ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å',
                        'tamil': 'üë®‚Äç‚öïÔ∏è ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç'
                    },
                    'E': {
                        'english': 'üö® Emergency',
                        'hindi': 'üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤',
                        'tamil': 'üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç'
                    }
                }[severity][currentLanguage];

                html += `
                    <div class="symptom-item">
                        <div>
                            <strong>${symptomName}</strong>
                            ${advice ? `<br><small>${advice.substring(0, 100)}${advice.length > 100 ? '...' : ''}</small>` : ''}
                        </div>
                        <div class="severity ${severity}">${severityText}</div>
                    </div>
                `;
            });
        } else {
            const noSymptomsText = {
                'english': 'No symptoms found for this language',
                'hindi': '‡§á‡§∏ ‡§≠‡§æ‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ',
                'tamil': '‡Æá‡Æ®‡Øç‡Æ§ ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æï‡Æø‡Æü‡Øà‡Æï‡Øç‡Æï‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà'
            }[currentLanguage];
            html = `<div class="error">${noSymptomsText}</div>`;
        }

        symptomsList.innerHTML = html;
    } catch (error) {
        console.error('Error loading symptoms:', error);
        
        // Enhanced sample symptoms with proper multilingual structure
        const sampleSymptoms = {
            'english': [
                { 
                    name: 'Fever', 
                    severity: 'H', 
                    advice: 'Take rest and drink plenty of fluids. Use cold compress on forehead.' 
                },
                { 
                    name: 'Cough', 
                    severity: 'H', 
                    advice: 'Drink warm water with honey. Use steam inhalation.' 
                },
                { 
                    name: 'Headache', 
                    severity: 'H', 
                    advice: 'Take rest in dark quiet room. Apply cold compress.' 
                },
                { 
                    name: 'Chest Pain', 
                    severity: 'E', 
                    advice: 'Stop all activity. Sit down and rest. Call emergency.' 
                },
                { 
                    name: 'Snake Bite', 
                    severity: 'E', 
                    advice: 'DO NOT cut the wound. Keep patient calm. Rush to hospital.' 
                },
                { 
                    name: 'Stomach Pain', 
                    severity: 'D', 
                    advice: 'Avoid solid food for few hours. Take small sips of water.' 
                }
            ],
            'hindi': [
                { 
                    name: '‡§¨‡•Å‡§ñ‡§æ‡§∞', 
                    severity: 'H', 
                    advice: '‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§ñ‡•Ç‡§¨ ‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§è‡§Ç‡•§ ‡§Æ‡§æ‡§•‡•á ‡§™‡§∞ ‡§†‡§Ç‡§°‡•Ä ‡§™‡§ü‡•ç‡§ü‡•Ä ‡§∞‡§ñ‡•á‡§Ç‡•§' 
                },
                { 
                    name: '‡§ñ‡§æ‡§Ç‡§∏‡•Ä', 
                    severity: 'H', 
                    advice: '‡§∂‡§π‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ó‡§∞‡•ç‡§Æ ‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§è‡§Ç‡•§ ‡§≠‡§æ‡§™ ‡§≤‡•á‡§Ç‡•§' 
                },
                { 
                    name: '‡§∏‡§ø‡§∞ ‡§¶‡§∞‡•ç‡§¶', 
                    severity: 'H', 
                    advice: '‡§Ö‡§Ç‡§ß‡•á‡§∞‡•á ‡§î‡§∞ ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§Æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§†‡§Ç‡§°‡•Ä ‡§∏‡§ø‡§ï‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç‡•§' 
                },
                { 
                    name: '‡§õ‡§æ‡§§‡•Ä ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶', 
                    severity: 'E', 
                    advice: '‡§∏‡§≠‡•Ä ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡§æ‡§Ç ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§¨‡•à‡§†‡§ï‡§∞ ‡§Ü‡§∞‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤ ‡§¨‡•Å‡§≤‡§æ‡§è‡§Ç‡•§' 
                },
                { 
                    name: '‡§∏‡§æ‡§Ç‡§™ ‡§ï‡§æ ‡§ï‡§æ‡§ü‡§®‡§æ', 
                    severity: 'E', 
                    advice: '‡§ò‡§æ‡§µ ‡§ï‡•ã ‡§® ‡§ï‡§æ‡§ü‡•á‡§Ç‡•§ ‡§Æ‡§∞‡•Ä‡§ú‡§º ‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§∞‡§ñ‡•á‡§Ç‡•§ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§≤‡•á ‡§ú‡§æ‡§è‡§Ç‡•§' 
                },
                { 
                    name: '‡§™‡•á‡§ü ‡§¶‡§∞‡•ç‡§¶', 
                    severity: 'D', 
                    advice: '‡§ï‡•Å‡§õ ‡§ò‡§Ç‡§ü‡•ã‡§Ç ‡§§‡§ï ‡§†‡•ã‡§∏ ‡§≠‡•ã‡§ú‡§® ‡§® ‡§≤‡•á‡§Ç‡•§ ‡§•‡•ã‡§°‡§º‡§æ-‡§•‡•ã‡§°‡§º‡§æ ‡§™‡§æ‡§®‡•Ä ‡§™‡§ø‡§è‡§Ç‡•§' 
                }
            ],
            'tamil': [
                { 
                    name: '‡Æï‡Ææ‡ÆØ‡Øç‡Æö‡Øç‡Æö‡Æ≤‡Øç', 
                    severity: 'H', 
                    advice: '‡Æì‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æé‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ±‡Øà‡ÆØ ‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ®‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡ÆØ‡Æø‡Æ≤‡Øç ‡Æï‡ØÅ‡Æ≥‡Æø‡Æ∞‡Øç‡Æ®‡Øç‡Æ§ ‡Æí‡Æ§‡Øç‡Æ§‡Æü‡ÆÆ‡Øç ‡Æï‡Øä‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç‡•§' 
                },
                { 
                    name: '‡Æá‡Æ∞‡ØÅ‡ÆÆ‡Æ≤‡Øç', 
                    severity: 'H', 
                    advice: '‡Æ§‡Øá‡Æ©‡ØÅ‡Æü‡Æ©‡Øç ‡Æµ‡ØÜ‡Æ§‡ØÅ‡Æµ‡ØÜ‡Æ§‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡Æ© ‡Æ®‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ®‡ØÄ‡Æ∞‡Ææ‡Æµ‡Æø ‡Æ™‡Æø‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç‡•§' 
                },
                { 
                    name: '‡Æ§‡Æ≤‡Øà‡Æµ‡Æ≤‡Æø', 
                    severity: 'H', 
                    advice: '‡Æá‡Æ∞‡ØÅ‡Æ£‡Øç‡Æü ‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Æø‡ÆØ‡Ææ‡Æ© ‡ÆÖ‡Æ±‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æì‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æï‡ØÅ‡Æ≥‡Æø‡Æ∞‡Øç ‡Æí‡Æ§‡Øç‡Æ§‡Æü‡ÆÆ‡Øç ‡Æï‡Øä‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç‡•§' 
                },
                { 
                    name: '‡Æ®‡ØÜ‡Æû‡Øç‡Æö‡ØÅ ‡Æµ‡Æ≤‡Æø', 
                    severity: 'E', 
                    advice: '‡ÆÖ‡Æ©‡Øà‡Æ§‡Øç‡Æ§‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ™‡Ææ‡Æü‡ØÅ‡Æï‡Æ≥‡Øà‡ÆØ‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æâ‡Æü‡Øç‡Æï‡Ææ‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÅ ‡Æì‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.' 
                },
                { 
                    name: '‡Æ™‡Ææ‡ÆÆ‡Øç‡Æ™‡ØÅ ‡Æï‡Æü‡Æø‡Æ§‡Øç‡Æ§‡Æ≤‡Øç', 
                    severity: 'E', 
                    advice: '‡Æï‡Ææ‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æµ‡ØÜ‡Æü‡Øç‡Æü ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡Ææ‡ÆÆ‡Øç. ‡Æ®‡Øã‡ÆØ‡Ææ‡Æ≥‡Æø‡ÆØ‡Øà ‡ÆÖ‡ÆÆ‡Øà‡Æ§‡Æø‡ÆØ‡Ææ‡Æï ‡Æµ‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.' 
                },
                { 
                    name: '‡Æµ‡ÆØ‡Æø‡Æ±‡Øç‡Æ±‡ØÅ‡Æµ‡Æ≤‡Æø', 
                    severity: 'D', 
                    advice: '‡Æö‡Æø‡Æ≤ ‡ÆÆ‡Æ£‡Æø ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç ‡Æ§‡Æø‡Æü ‡Æâ‡Æ£‡Æµ‡ØÅ ‡Æ§‡Æµ‡Æø‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æï‡Øä‡Æû‡Øç‡Æö‡ÆÆ‡Øç ‡Æï‡Øä‡Æû‡Øç‡Æö‡ÆÆ‡Ææ‡Æï ‡Æ§‡Æ£‡Øç‡Æ£‡ØÄ‡Æ∞‡Øç ‡Æï‡ØÅ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.' 
                }
            ]
        };

        const severityText = {
            'H': {
                'english': 'üè† Home Care',
                'hindi': 'üè† ‡§ò‡§∞‡•á‡§≤‡•Ç ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤', 
                'tamil': 'üè† ‡Æµ‡ØÄ‡Æü‡Øç‡Æü‡Æø‡Æ≤‡Øç ‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ'
            },
            'D': {
                'english': 'üë®‚Äç‚öïÔ∏è Doctor Visit',
                'hindi': 'üë®‚Äç‚öïÔ∏è ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å',
                'tamil': 'üë®‚Äç‚öïÔ∏è ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡ÆÖ‡Æ£‡ØÅ‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç'
            },
            'E': {
                'english': 'üö® Emergency',
                'hindi': 'üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤',
                'tamil': 'üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞‡ÆÆ‡Øç'
            }
        };

        let html = '';
        sampleSymptoms[currentLanguage].forEach(symptom => {
            html += `
                <div class="symptom-item">
                    <div>
                        <strong>${symptom.name}</strong>
                        <br><small>${symptom.advice.substring(0, 100)}${symptom.advice.length > 100 ? '...' : ''}</small>
                    </div>
                    <div class="severity ${symptom.severity}">${severityText[symptom.severity][currentLanguage]}</div>
                </div>
            `;
        });

        const errorText = {
            'english': 'Backend not connected - showing sample data',
            'hindi': '‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à - ‡§®‡§Æ‡•Ç‡§®‡§æ ‡§°‡•á‡§ü‡§æ ‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç',
            'tamil': '‡Æ™‡Æø‡Æ©‡Øç‡Æ§‡Æ≥‡ÆÆ‡Øç ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà - ‡ÆÆ‡Ææ‡Æ§‡Æø‡Æ∞‡Æø ‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ'
        }[currentLanguage];

        document.getElementById('symptoms-list').innerHTML = html + 
            `<div class="error" style="margin-top: 20px;">${errorText}</div>`;
    }
}

        // Update statistics display
        function updateStatsDisplay() {
            document.getElementById('total-queries').textContent = usageStats.totalQueries;
            document.getElementById('voice-queries').textContent = usageStats.voiceQueries;
            document.getElementById('successful-matches').textContent = usageStats.successfulMatches;
        }

        // Update stats in main menu
        function updateStats() {
            const labels = {
                'english': {queries: 'Total Queries', voice: 'Voice Queries', matches: 'Successful Matches'},
                'hindi': {queries: '‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®', voice: '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§™‡•ç‡§∞‡§∂‡•ç‡§®', matches: '‡§∏‡§´‡§≤ ‡§Æ‡•à‡§ö'},
                'tamil': {queries: '‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øç', voice: '‡Æï‡ØÅ‡Æ∞‡Æ≤‡Øç ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øç', matches: '‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æ© ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡Æô‡Øç‡Æï‡Æ≥‡Øç'}
            };
            
            if (document.getElementById('queries-label')) {
                document.getElementById('queries-label').textContent = labels[currentLanguage].queries;
                document.getElementById('voice-label').textContent = labels[currentLanguage].voice;
                document.getElementById('matches-label').textContent = labels[currentLanguage].matches;
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initSpeechRecognition();
            
            if ('speechSynthesis' in window) {
                speechSynthesis.onvoiceschanged = function() {
                    // Voices loaded
                };
            }
            
            document.getElementById('symptom-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    processSymptom();
                }
            });
        });
       // Emergency Alert Function
function emergencyAlert() {
    const alertMessage = getText('emergency_alert');
    
    // Display emergency message in results div
    const resultsDiv = document.getElementById('results');
    if (resultsDiv) {
        resultsDiv.innerHTML = `
            <div style="background: #ffebee; border: 2px solid #f44336; border-radius: 15px; padding: 25px; margin: 10px 0; text-align: center; box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);">
                <h3 style="color: #c62828; margin-bottom: 15px; font-size: 24px;">üö® EMERGENCY ALERT</h3>
                <p style="color: #d32f2f; font-size: 18px; font-weight: bold; line-height: 1.4;">${alertMessage}</p>
                <div style="margin-top: 20px; padding: 15px; background: #fff; border-radius: 10px; border-left: 5px solid #f44336;">
                    <p style="color: #666; font-size: 16px; margin: 0;">
                        ${currentLanguage === 'english' ? 'üìû Emergency helpline will be contacted automatically' : 
                          currentLanguage === 'hindi' ? 'üìû ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§® ‡§∏‡•á ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ' :
                          'üìû ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æπ‡ØÜ‡Æ≤‡Øç‡Æ™‡Øç‡Æ≤‡Øà‡Æ©‡Øç ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æ≥‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç'}
                    </p>
                </div>
            </div>
        `;
        resultsDiv.style.display = 'block';
        resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    
    // Text-to-Speech for emergency alert
    speakEmergencyAlert(alertMessage);
}

// Text-to-Speech for Emergency Alert
function speakEmergencyAlert(text) {
    if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        
        const langMapping = {
            'english': 'en-US',
            'hindi': 'hi-IN',
            'tamil': 'ta-IN'
        };
        
        utterance.lang = langMapping[currentLanguage] || 'en-US';
        utterance.rate = 0.8;
        utterance.pitch = 1.1;
        utterance.volume = 1.0;
        
        window.speechSynthesis.speak(utterance);
    }
}

// Update Emergency Button Labels
function updateEmergencyButtonLabel() {
    const emergencyButtons = document.querySelectorAll('#emergencyBtn, #emergencyBtnMain');
    emergencyButtons.forEach(button => {
        if (button) {
            button.innerHTML = getText('emergency_button');
        }
    });
} 

    </script>
</body>
</html>
